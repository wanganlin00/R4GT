<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>R for Graphics and Tables</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="styles.css">
</head>
<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R for Graphics and Tables</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">主页</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./ggplot2_graphics.html" aria-current="page"> 
<span class="menu-text">ggplot2 图形</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./base_graphics.html"> 
<span class="menu-text">baseR 图形</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Table.html"> 
<span class="menu-text">表格</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./references.html"> 
<span class="menu-text">参考文献</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./ggplot2_graphics.html">ggplot2 Graphics</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ggplot2_graphics.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">ggplot2 Graphics</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ggproto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>ggproto</code> 对象</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ggplot2_extensions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ggplot2 extensions</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./patchwork.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">图形布局</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./双y轴.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">双y轴</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./误差棒图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">误差棒图</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">条形图</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./条图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">条图</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ggprism.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GraphPad Prism 风格</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./双向条图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">双向条图</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./发散条图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">发散条图</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">点线图</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./散点图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">散点图</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./点图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">点图</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Q-Q图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Q-Q图</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./曼哈顿图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">曼哈顿图</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">曲线图</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./折线图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">折线图</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./生存曲线.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">生存曲线</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ROC.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ROC</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">关系图</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./相关图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">相关图</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./热图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">热图</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./网络图.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">网络图</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li>
<a href="#sec-ggplot2" id="toc-sec-ggplot2" class="nav-link active" data-scroll-target="#sec-ggplot2"><span class="header-section-number">1</span> ggplot2 Graphics</a>
  <ul>
<li>
<a href="#ggplot" id="toc-ggplot" class="nav-link" data-scroll-target="#ggplot"><span class="header-section-number">1.1</span> <code>ggplot</code></a>
  <ul class="collapse">
<li>
<a href="#aesthetics-mapping" id="toc-aesthetics-mapping" class="nav-link" data-scroll-target="#aesthetics-mapping"><span class="header-section-number">1.1.1</span> aesthetics mapping</a>
  <ul class="collapse">
<li><a href="#color" id="toc-color" class="nav-link" data-scroll-target="#color"><span class="header-section-number">1.1.1.1</span> color</a></li>
  <li><a href="#fill" id="toc-fill" class="nav-link" data-scroll-target="#fill"><span class="header-section-number">1.1.1.2</span> fill</a></li>
  <li><a href="#shape" id="toc-shape" class="nav-link" data-scroll-target="#shape"><span class="header-section-number">1.1.1.3</span> shape</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#geometry" id="toc-geometry" class="nav-link" data-scroll-target="#geometry"><span class="header-section-number">1.2</span> Geometry</a>
  <ul class="collapse">
<li>
<a href="#x%E8%BF%9E%E7%BB%AD%E5%9E%8B%E5%8F%98%E9%87%8F" id="toc-x连续型变量" class="nav-link" data-scroll-target="#x%E8%BF%9E%E7%BB%AD%E5%9E%8B%E5%8F%98%E9%87%8F"><span class="header-section-number">1.2.1</span> X=连续型变量</a>
  <ul class="collapse">
<li><a href="#geom_point" id="toc-geom_point" class="nav-link" data-scroll-target="#geom_point"><span class="header-section-number">1.2.1.1</span> geom_point</a></li>
  <li><a href="#geom_line" id="toc-geom_line" class="nav-link" data-scroll-target="#geom_line"><span class="header-section-number">1.2.1.2</span> geom_line</a></li>
  <li><a href="#geom_smooth" id="toc-geom_smooth" class="nav-link" data-scroll-target="#geom_smooth"><span class="header-section-number">1.2.1.3</span> geom_smooth</a></li>
  <li><a href="#geom_histogram" id="toc-geom_histogram" class="nav-link" data-scroll-target="#geom_histogram"><span class="header-section-number">1.2.1.4</span> geom_histogram</a></li>
  <li><a href="#geom_bin2d" id="toc-geom_bin2d" class="nav-link" data-scroll-target="#geom_bin2d"><span class="header-section-number">1.2.1.5</span> geom_bin2d()</a></li>
  <li><a href="#geom_freqpoly" id="toc-geom_freqpoly" class="nav-link" data-scroll-target="#geom_freqpoly"><span class="header-section-number">1.2.1.6</span> geom_freqpoly</a></li>
  <li><a href="#geom_density" id="toc-geom_density" class="nav-link" data-scroll-target="#geom_density"><span class="header-section-number">1.2.1.7</span> geom_density</a></li>
  <li><a href="#geom_rug" id="toc-geom_rug" class="nav-link" data-scroll-target="#geom_rug"><span class="header-section-number">1.2.1.8</span> geom_rug</a></li>
  <li><a href="#geom_jitter" id="toc-geom_jitter" class="nav-link" data-scroll-target="#geom_jitter"><span class="header-section-number">1.2.1.9</span> geom_jitter</a></li>
  </ul>
</li>
  <li>
<a href="#x%E7%A6%BB%E6%95%A3%E5%9E%8B%E5%8F%98%E9%87%8F" id="toc-x离散型变量" class="nav-link" data-scroll-target="#x%E7%A6%BB%E6%95%A3%E5%9E%8B%E5%8F%98%E9%87%8F"><span class="header-section-number">1.2.2</span> X=离散型变量</a>
  <ul class="collapse">
<li><a href="#geom_bar" id="toc-geom_bar" class="nav-link" data-scroll-target="#geom_bar"><span class="header-section-number">1.2.2.1</span> geom_bar</a></li>
  <li><a href="#geom_errorbar" id="toc-geom_errorbar" class="nav-link" data-scroll-target="#geom_errorbar"><span class="header-section-number">1.2.2.2</span> geom_errorbar</a></li>
  <li><a href="#geom_dotplot" id="toc-geom_dotplot" class="nav-link" data-scroll-target="#geom_dotplot"><span class="header-section-number">1.2.2.3</span> geom_dotplot</a></li>
  <li><a href="#geom_boxplot" id="toc-geom_boxplot" class="nav-link" data-scroll-target="#geom_boxplot"><span class="header-section-number">1.2.2.4</span> geom_boxplot</a></li>
  <li><a href="#geom_violin" id="toc-geom_violin" class="nav-link" data-scroll-target="#geom_violin"><span class="header-section-number">1.2.2.5</span> geom_violin</a></li>
  <li><a href="#geom_tile" id="toc-geom_tile" class="nav-link" data-scroll-target="#geom_tile"><span class="header-section-number">1.2.2.6</span> geom_tile</a></li>
  </ul>
</li>
  </ul>
</li>
  <li><a href="#%E7%BB%9F%E8%AE%A1%E5%8F%98%E6%8D%A2-statistical-transformations" id="toc-统计变换-statistical-transformations" class="nav-link" data-scroll-target="#%E7%BB%9F%E8%AE%A1%E5%8F%98%E6%8D%A2-statistical-transformations"><span class="header-section-number">1.3</span> 统计变换 statistical transformations</a></li>
  <li>
<a href="#%E4%BD%8D%E7%BD%AE%E8%B0%83%E6%95%B4-position-adjustments" id="toc-位置调整-position-adjustments" class="nav-link" data-scroll-target="#%E4%BD%8D%E7%BD%AE%E8%B0%83%E6%95%B4-position-adjustments"><span class="header-section-number">1.4</span> 位置调整 position adjustments</a>
  <ul class="collapse">
<li><a href="#%E6%9D%A1%E5%81%8F%E7%A7%BB" id="toc-条偏移" class="nav-link" data-scroll-target="#%E6%9D%A1%E5%81%8F%E7%A7%BB"><span class="header-section-number">1.4.0.1</span> 条偏移</a></li>
  <li><a href="#%E7%82%B9%E5%81%8F%E7%A7%BB" id="toc-点偏移" class="nav-link" data-scroll-target="#%E7%82%B9%E5%81%8F%E7%A7%BB"><span class="header-section-number">1.4.0.2</span> 点偏移</a></li>
  </ul>
</li>
  <li><a href="#%E5%9D%90%E6%A0%87%E7%B3%BB-coordinate" id="toc-坐标系-coordinate" class="nav-link" data-scroll-target="#%E5%9D%90%E6%A0%87%E7%B3%BB-coordinate"><span class="header-section-number">1.5</span> 坐标系 coordinate</a></li>
  <li>
<a href="#%E5%9D%90%E6%A0%87%E8%BD%B4-axis" id="toc-坐标轴-axis" class="nav-link" data-scroll-target="#%E5%9D%90%E6%A0%87%E8%BD%B4-axis"><span class="header-section-number">1.6</span> 坐标轴 axis</a>
  <ul class="collapse">
<li><a href="#%E5%8F%98%E6%8D%A2" id="toc-变换" class="nav-link" data-scroll-target="#%E5%8F%98%E6%8D%A2"><span class="header-section-number">1.6.1</span> 变换</a></li>
  <li><a href="#limits" id="toc-limits" class="nav-link" data-scroll-target="#limits"><span class="header-section-number">1.6.2</span> limits</a></li>
  <li><a href="#zooming" id="toc-zooming" class="nav-link" data-scroll-target="#zooming"><span class="header-section-number">1.6.3</span> zooming</a></li>
  <li><a href="#%E5%85%B1%E4%BA%AB" id="toc-共享" class="nav-link" data-scroll-target="#%E5%85%B1%E4%BA%AB"><span class="header-section-number">1.6.4</span> 共享</a></li>
  </ul>
</li>
  <li><a href="#%E6%A0%87%E9%A2%98-labels" id="toc-标题-labels" class="nav-link" data-scroll-target="#%E6%A0%87%E9%A2%98-labels"><span class="header-section-number">1.7</span> 标题 labels</a></li>
  <li>
<a href="#%E6%B3%A8%E9%87%8A-annotation" id="toc-注释-annotation" class="nav-link" data-scroll-target="#%E6%B3%A8%E9%87%8A-annotation"><span class="header-section-number">1.8</span> 注释 annotation</a>
  <ul class="collapse">
<li><a href="#%E6%96%87%E6%9C%AC-text" id="toc-文本-text" class="nav-link" data-scroll-target="#%E6%96%87%E6%9C%AC-text"><span class="header-section-number">1.8.1</span> 文本 text</a></li>
  <li><a href="#markdown" id="toc-markdown" class="nav-link" data-scroll-target="#markdown"><span class="header-section-number">1.8.2</span> markdown</a></li>
  <li><a href="#%E6%95%B0%E5%AD%A6%E8%A1%A8%E8%BE%BE%E5%BC%8F" id="toc-数学表达式" class="nav-link" data-scroll-target="#%E6%95%B0%E5%AD%A6%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="header-section-number">1.8.3</span> 数学表达式</a></li>
  <li><a href="#%E7%BA%BF%E6%AE%B5-%E7%9B%B4%E7%BA%BF-%E7%AE%AD%E5%A4%B4" id="toc-线段-直线-箭头" class="nav-link" data-scroll-target="#%E7%BA%BF%E6%AE%B5-%E7%9B%B4%E7%BA%BF-%E7%AE%AD%E5%A4%B4"><span class="header-section-number">1.8.4</span> 线段 直线 箭头</a></li>
  </ul>
</li>
  <li>
<a href="#scale" id="toc-scale" class="nav-link" data-scroll-target="#scale"><span class="header-section-number">1.9</span> scale</a>
  <ul class="collapse">
<li><a href="#xy_continuous" id="toc-xy_continuous" class="nav-link" data-scroll-target="#xy_continuous"><span class="header-section-number">1.9.1</span> x/y_continuous</a></li>
  <li><a href="#xy_discrete" id="toc-xy_discrete" class="nav-link" data-scroll-target="#xy_discrete"><span class="header-section-number">1.9.2</span> x/y_discrete</a></li>
  <li><a href="#color-1" id="toc-color-1" class="nav-link" data-scroll-target="#color-1"><span class="header-section-number">1.9.3</span> color</a></li>
  <li><a href="#fill-1" id="toc-fill-1" class="nav-link" data-scroll-target="#fill-1"><span class="header-section-number">1.9.4</span> fill</a></li>
  </ul>
</li>
  <li><a href="#%E5%88%86%E9%9D%A2" id="toc-分面" class="nav-link" data-scroll-target="#%E5%88%86%E9%9D%A2"><span class="header-section-number">1.10</span> 分面</a></li>
  <li>
<a href="#%E4%B8%BB%E9%A2%98" id="toc-主题" class="nav-link" data-scroll-target="#%E4%B8%BB%E9%A2%98"><span class="header-section-number">1.11</span> 主题</a>
  <ul class="collapse">
<li><a href="#%E5%86%85%E7%BD%AE%E4%B8%BB%E9%A2%98" id="toc-内置主题" class="nav-link" data-scroll-target="#%E5%86%85%E7%BD%AE%E4%B8%BB%E9%A2%98"><span class="header-section-number">1.11.1</span> 内置主题</a></li>
  <li><a href="#%E5%AD%97%E4%BD%93" id="toc-字体" class="nav-link" data-scroll-target="#%E5%AD%97%E4%BD%93"><span class="header-section-number">1.11.2</span> 字体</a></li>
  <li><a href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A2%98" id="toc-自定义主题" class="nav-link" data-scroll-target="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%BB%E9%A2%98"><span class="header-section-number">1.11.3</span> 自定义主题</a></li>
  <li><a href="#%E5%9B%BE%E4%BE%8B" id="toc-图例" class="nav-link" data-scroll-target="#%E5%9B%BE%E4%BE%8B"><span class="header-section-number">1.11.4</span> 图例</a></li>
  <li><a href="#%E7%BB%98%E5%9B%BE%E5%8C%BA" id="toc-绘图区" class="nav-link" data-scroll-target="#%E7%BB%98%E5%9B%BE%E5%8C%BA"><span class="header-section-number">1.11.5</span> 绘图区</a></li>
  </ul>
</li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><div class="quarto-title-block"><div class="quarto-title-tools-only"><h1></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div><section id="sec-ggplot2" class="level1" style="color:red" data-number="1"><h1 style="color:red" data-number="1">
<span class="header-section-number">1</span> ggplot2 Graphics</h1>
<p><a href="https://ggplot2-book.org/mastery">ggplot2：用于数据分析的优雅图形</a></p>
<p>gg 为 grammar of graphics 的缩写。</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://patchwork.data-imaginist.com">patchwork</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="ggplot" class="level2" data-number="1.1"><h2 data-number="1.1" class="anchored" data-anchor-id="ggplot">
<span class="header-section-number">1.1</span> <code>ggplot</code>
</h2>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>    index <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">26</span>,</span>
<span>    pch <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">25</span>,</span>
<span>    type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"hollow_color"</span>,<span class="fl">15</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"soild_color"</span>,<span class="fl">6</span><span class="op">)</span>,<span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"fill_color"</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>, times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">6</span>,<span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    </span>
<span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><code>ggplot(data =  ,mapping = aes(x,y,…))</code></p>
<p>创建一个基础图形对象<code>gg</code>，空白图层 + 数据集 + 美学映射。</p>
<section id="aesthetics-mapping" class="level3" data-number="1.1.1"><h3 data-number="1.1.1" class="anchored" data-anchor-id="aesthetics-mapping">
<span class="header-section-number">1.1.1</span> aesthetics mapping</h3>
<p><code>mapping=aes(x,y,z,..,color,fill,shape,size,group,linewidth,linetype,alpha,...)</code></p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>,</span>
<span>       mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">index</span>, y <span class="op">=</span> <span class="va">pch</span> <span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-3-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="color" class="level4" data-number="1.1.1.1"><h4 data-number="1.1.1.1" class="anchored" data-anchor-id="color">
<span class="header-section-number">1.1.1.1</span> color</h4>
</section><section id="fill" class="level4" data-number="1.1.1.2"><h4 data-number="1.1.1.2" class="anchored" data-anchor-id="fill">
<span class="header-section-number">1.1.1.2</span> fill</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span>
<span><span class="va">colours</span> <span class="op">&lt;-</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/pal_viridis.html">viridis_pal</a></span><span class="op">(</span><span class="op">)</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">patterns</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/grid/patterns.html">linearGradient</a></span><span class="op">(</span><span class="va">colours</span>, group <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  <span class="st">"limegreen"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/grid/patterns.html">radialGradient</a></span><span class="op">(</span><span class="va">colours</span>, group <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/grid/patterns.html">pattern</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/grid/grid.rect.html">rectGrob</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">0.5</span>, height <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">5</span>, <span class="st">"mm"</span><span class="op">)</span>, height <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">5</span>, <span class="st">"mm"</span><span class="op">)</span>, extend <span class="op">=</span> <span class="st">"repeat"</span>,</span>
<span>    gp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/gpar.html">gpar</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"limegreen"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">patterns</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-4-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="shape" class="level4" data-number="1.1.1.3"><h4 data-number="1.1.1.3" class="anchored" data-anchor-id="shape">
<span class="header-section-number">1.1.1.3</span> shape</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>, mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">index</span>, y <span class="op">=</span> <span class="va">pch</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="st">"."</span><span class="op">)</span> <span class="co">#像素</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-5-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">index</span>, <span class="va">pch</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">pch</span><span class="op">)</span><span class="op">)</span>, fill <span class="op">=</span><span class="st">"red"</span>,size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_shape_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">25</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="st">"点形状"</span> <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-5-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">shape_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"circle"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"circle"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"open"</span>, <span class="st">"filled"</span>, <span class="st">"cross"</span>, <span class="st">"plus"</span>, <span class="st">"small"</span><span class="op">)</span><span class="op">)</span>, <span class="st">"bullet"</span>,</span>
<span>  <span class="st">"square"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"square"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"open"</span>, <span class="st">"filled"</span>, <span class="st">"cross"</span>, <span class="st">"plus"</span>, <span class="st">"triangle"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="st">"diamond"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"diamond"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"open"</span>, <span class="st">"filled"</span>, <span class="st">"plus"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="st">"triangle"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"triangle"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"open"</span>, <span class="st">"filled"</span>, <span class="st">"square"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="st">"triangle down"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"open"</span>, <span class="st">"filled"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="st">"plus"</span>, <span class="st">"cross"</span>, <span class="st">"asterisk"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">shapes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  shape_names <span class="op">=</span> <span class="va">shape_names</span>,</span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">7</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">5</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">6</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">6</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">shapes</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="va">shape_names</span><span class="op">)</span>, fill <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">shape_names</span><span class="op">)</span>, nudge_y <span class="op">=</span> <span class="op">-</span><span class="fl">0.3</span>, size <span class="op">=</span> <span class="fl">3.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html">scale_shape_identity</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_void</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-6-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section></section></section><section id="geometry" class="level2" data-number="1.2"><h2 data-number="1.2" class="anchored" data-anchor-id="geometry">
<span class="header-section-number">1.2</span> Geometry</h2>
<ul>
<li>
<p>图形基元（Graphical primitives）:</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_blank.html">geom_blank()</a></code>: display nothing. Most useful for adjusting axes limits using data.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>: points.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_path()</a></code>: paths.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_ribbon()</a></code>: ribbons, a path with vertical thickness.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html">geom_segment()</a></code>: a line segment, specified by start and end position.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_rect()</a></code>: rectangles.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html">geom_polygon()</a></code>: filled polygons.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a></code>: text.</p></li>
</ul>
</li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">5</span><span class="op">)</span>, </span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span>, </span>
<span>  label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, label <span class="op">=</span> <span class="va">label</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span> <span class="co"># Hide axis label</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="co"># Shrink plot title</span></span>
<span></span>
<span><span class="op">(</span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"point"</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"text"</span><span class="op">)</span> <span class="op">+</span></span>
<span>        <span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"bar"</span><span class="op">)</span> <span class="op">)</span><span class="op">/</span></span>
<span><span class="op">(</span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"tile"</span><span class="op">)</span> <span class="op">+</span></span>
<span>     <span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_raster</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"raster"</span><span class="op">)</span><span class="op">+</span></span>
<span>     <span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"line"</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span></span>
<span><span class="op">(</span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"area"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_path</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"path"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html">geom_polygon</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"polygon"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-7-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>
<p>One variable:</p>
<ul>
<li>
<p>Discrete:</p>
<ul>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar()</a></code>: display distribution of discrete variable.</li>
</ul>
</li>
<li>
<p>Continuous:</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram()</a></code>: bin and count continuous variable, display with bars.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density()</a></code>: smoothed density estimate.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_dotplot.html">geom_dotplot()</a></code>: stack individual points into a dot plot.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly()</a></code>: bin and count continuous variable, display with lines.</p></li>
</ul>
</li>
</ul>
</li>
<li>
<p>Two variables:</p>
<ul>
<li>
<p>Both continuous:</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point()</a></code>: scatterplot.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html">geom_quantile()</a></code>: smoothed quantile regression.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_rug.html">geom_rug()</a></code>: marginal rug plots.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth()</a></code>: smoothed line of best fit.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text()</a></code>: text labels.</p></li>
</ul>
</li>
<li>
<p>Show distribution:</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_bin_2d.html">geom_bin2d()</a></code>: bin into rectangles and count.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_density_2d.html">geom_density2d()</a></code>: smoothed 2d density estimate.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">geom_hex()</a></code>: bin into hexagons and count.</p></li>
</ul>
</li>
<li>
<p>At least one discrete:</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_count.html">geom_count()</a></code>: count number of point at distinct locations</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter()</a></code>: randomly jitter overlapping points.</p></li>
</ul>
</li>
<li>
<p>One continuous, one discrete:</p>
<ul>
<li><p><code>geom_bar(stat = "identity")</code>: a bar chart of precomputed summaries.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot()</a></code>: boxplots.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin()</a></code>: show density of values in each group.</p></li>
</ul>
</li>
<li>
<p>One time, one continuous:</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_area()</a></code>: area plot.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line()</a></code>: line plot.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_step()</a></code>: step plot.</p></li>
</ul>
</li>
<li>
<p>Display uncertainty:</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_crossbar()</a></code>: vertical bar with center.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_errorbar()</a></code>: error bars.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_linerange()</a></code>: vertical line.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_pointrange()</a></code>: vertical line with center.</p></li>
</ul>
</li>
<li>
<p>Spatial:</p>
<ul>
<li>
<code><a href="https://ggplot2.tidyverse.org/reference/geom_map.html">geom_map()</a></code>: fast version of for map data.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Three variables:</p>
<ul>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_contour.html">geom_contour()</a></code>: contours.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile()</a></code>: tile the plane with rectangles.</p></li>
<li><p><code><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_raster()</a></code>: fast version of for equal sized tiles.</p></li>
</ul>
</li>
</ul>
<section id="x连续型变量" class="level3" data-number="1.2.1"><h3 data-number="1.2.1" class="anchored" data-anchor-id="x连续型变量">
<span class="header-section-number">1.2.1</span> X=连续型变量</h3>
<section id="geom_point" class="level4" data-number="1.2.1.1"><h4 data-number="1.2.1.1" class="anchored" data-anchor-id="geom_point">
<span class="header-section-number">1.2.1.1</span> geom_point</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">displ</span>,y<span class="op">=</span><span class="va">hwy</span><span class="op">)</span>,</span>
<span>               stat <span class="op">=</span> <span class="st">"identity"</span>,position <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-8-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>,<span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|</span></span>
<span>    </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>,<span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>size <span class="op">=</span> <span class="va">displ</span><span class="op">/</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_size.html">scale_size_area</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"displ/10"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-9-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_line" class="level4" data-number="1.2.1.2"><h4 data-number="1.2.1.2" class="anchored" data-anchor-id="geom_line">
<span class="header-section-number">1.2.1.2</span> geom_line</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">economics</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 6</span></span>
<span><span class="co">#&gt;   date         pce    pop psavert uempmed unemploy</span></span>
<span><span class="co">#&gt;   &lt;date&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 1967-07-01  507. 198712    12.6     4.5     2944</span></span>
<span><span class="co">#&gt; 2 1967-08-01  510. 198911    12.6     4.7     2945</span></span>
<span><span class="co">#&gt; 3 1967-09-01  516. 199113    11.9     4.6     2958</span></span>
<span><span class="co">#&gt; 4 1967-10-01  512. 199311    12.9     4.9     3143</span></span>
<span><span class="co">#&gt; 5 1967-11-01  517. 199498    12.8     4.7     3066</span></span>
<span><span class="co">#&gt; 6 1967-12-01  525. 199657    11.8     4.8     3018</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">economics</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>,<span class="va">pop</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_date</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-10-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_smooth" class="level4" data-number="1.2.1.3"><h4 data-number="1.2.1.3" class="anchored" data-anchor-id="geom_smooth">
<span class="header-section-number">1.2.1.3</span> geom_smooth</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">q</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">q</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"loess"</span>,span <span class="op">=</span> <span class="fl">0.2</span>,se<span class="op">=</span><span class="cn">T</span><span class="op">)</span> <span class="co"># loess 平滑局部回归   small n</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-11-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span>                                   <span class="co">#span 0非常摆动，1不那么摆动</span></span>
<span></span>
<span><span class="va">q</span><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>span <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>  <span class="co">#不很摆动</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-11-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/">MASS</a></span><span class="op">)</span></span>
<span><span class="va">q</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"rlm"</span><span class="op">)</span>   <span class="co"># robust linear model  稳健线性模型</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-11-3.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">mgcv</span><span class="op">)</span></span>
<span><span class="va">q</span><span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"gam"</span>, formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/pkg/mgcv/man/s.html">s</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="co"># gam 广义相加模型   n&gt;1000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-11-4.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">binomial_smooth</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"glm"</span>, method.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span>, <span class="va">...</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu">rpart</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/rpart/man/kyphosis.html">kyphosis</a></span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">Age</span>,<span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">Kyphosis</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu">binomial_smooth</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using formula = 'y ~ x'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-12-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_histogram" class="level4" data-number="1.2.1.4"><h4 data-number="1.2.1.4" class="anchored" data-anchor-id="geom_histogram">
<span class="header-section-number">1.2.1.4</span> geom_histogram</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-13-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">|</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>weight <span class="op">=</span> <span class="va">displ</span><span class="op">)</span>, binwidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="co"># 加权</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-13-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">displ</span>,y<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html">after_stat</a></span><span class="op">(</span><span class="va">density</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                   stat <span class="op">=</span> <span class="st">"bin"</span>,position <span class="op">=</span> <span class="st">"stack"</span>,</span>
<span>                   binwidth <span class="op">=</span> <span class="fl">0.5</span></span>
<span>                   <span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels<span class="op">=</span><span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">displ</span>,y<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html">after_stat</a></span><span class="op">(</span><span class="va">density</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                 color<span class="op">=</span><span class="st">"red"</span>, linewidth<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-13-3.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_bin2d" class="level4" data-number="1.2.1.5"><h4 data-number="1.2.1.5" class="anchored" data-anchor-id="geom_bin2d">
<span class="header-section-number">1.2.1.5</span> geom_bin2d()</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">smaller</span> <span class="op">&lt;-</span> <span class="va">diamonds</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">carat</span> <span class="op">&lt;</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">smaller</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bin_2d.html">geom_bin2d</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-14-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># install.packages("hexbin")</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">smaller</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">carat</span>, y <span class="op">=</span> <span class="va">price</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">geom_hex</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Computation failed in `stat_binhex()`.</span></span>
<span><span class="co">#&gt; Caused by error in `compute_group()`:</span></span>
<span><span class="co">#&gt; ! The package "hexbin" is required for `stat_bin_hex()`.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-14-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_freqpoly" class="level4" data-number="1.2.1.6"><h4 data-number="1.2.1.6" class="anchored" data-anchor-id="geom_freqpoly">
<span class="header-section-number">1.2.1.6</span> geom_freqpoly</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_freqpoly</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-15-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_density" class="level4" data-number="1.2.1.7"><h4 data-number="1.2.1.7" class="anchored" data-anchor-id="geom_density">
<span class="header-section-number">1.2.1.7</span> geom_density</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>,fill<span class="op">=</span><span class="va">drv</span><span class="op">)</span>,</span>
<span>                 stat <span class="op">=</span> <span class="st">"density"</span>,position <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>                 alpha<span class="op">=</span><span class="fl">0.3</span></span>
<span>                 <span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>fill<span class="op">=</span><span class="st">"图例名"</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-16-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_rug" class="level4" data-number="1.2.1.8"><h4 data-number="1.2.1.8" class="anchored" data-anchor-id="geom_rug">
<span class="header-section-number">1.2.1.8</span> geom_rug</h4>
<p>y→<code>sides="r","l"</code></p>
<p>x→<code>sides="b","t"</code></p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_rug.html">geom_rug</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">displ</span>,y<span class="op">=</span><span class="va">hwy</span><span class="op">)</span>,</span>
<span>           sides <span class="op">=</span> <span class="st">"br"</span>,color<span class="op">=</span><span class="st">"brown"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-17-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_jitter" class="level4" data-number="1.2.1.9"><h4 data-number="1.2.1.9" class="anchored" data-anchor-id="geom_jitter">
<span class="header-section-number">1.2.1.9</span> geom_jitter</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">displ</span>,y<span class="op">=</span><span class="va">hwy</span><span class="op">)</span>,</span>
<span>               stat <span class="op">=</span> <span class="st">"identity"</span>,position <span class="op">=</span> <span class="st">"jitter"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-18-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="x离散型变量" class="level3" data-number="1.2.2"><h3 data-number="1.2.2" class="anchored" data-anchor-id="x离散型变量">
<span class="header-section-number">1.2.2</span> X=离散型变量</h3>
<section id="geom_bar" class="level4" data-number="1.2.2.1"><h4 data-number="1.2.2.1" class="anchored" data-anchor-id="geom_bar">
<span class="header-section-number">1.2.2.1</span> geom_bar</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>,fill<span class="op">=</span><span class="va">drv</span><span class="op">)</span>,</span>
<span>             stat <span class="op">=</span> <span class="st">"count"</span>,position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span> <span class="op">|</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>,fill<span class="op">=</span><span class="va">drv</span><span class="op">)</span>,</span>
<span>             position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-19-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>,y<span class="op">=</span><span class="va">hwy</span>,fill<span class="op">=</span><span class="va">drv</span><span class="op">)</span>,</span>
<span>             position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span> <span class="op">|</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>,y<span class="op">=</span><span class="va">hwy</span>,fill<span class="op">=</span><span class="va">drv</span><span class="op">)</span>,</span>
<span>             position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_percent.html">label_percent</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-19-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>有序条形图</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu">fct_infreq</span><span class="op">(</span><span class="va">class</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  <span class="co">#降序条形图</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-20-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_errorbar" class="level4" data-number="1.2.2.2"><h4 data-number="1.2.2.2" class="anchored" data-anchor-id="geom_errorbar">
<span class="header-section-number">1.2.2.2</span> geom_errorbar</h4>
<ul>
<li><p>geom_errorbarh</p></li>
<li><p>geom_linerange</p></li>
<li><p>geom_crossbar</p></li>
<li><p>geom_pointrange</p></li>
</ul>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="fl">11</span>, <span class="fl">16</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, y <span class="op">=</span> <span class="va">y</span>, se <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.2</span>, <span class="fl">0.5</span>, <span class="fl">1.0</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">base</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, ymin <span class="op">=</span> <span class="va">y</span> <span class="op">-</span> <span class="va">se</span>, ymax <span class="op">=</span> <span class="va">y</span> <span class="op">+</span> <span class="va">se</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_errorbar</a></span><span class="op">(</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_linerange</a></span><span class="op">(</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html">geom_ribbon</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">/</span></span>
<span><span class="op">(</span><span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_crossbar</a></span><span class="op">(</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_pointrange</a></span><span class="op">(</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-21-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">read_csv</span><span class="op">(</span><span class="st">"data/g.csv"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>        mean<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">liverweight</span><span class="op">)</span>,</span>
<span>        sd<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">liverweight</span><span class="op">)</span>,</span>
<span>        .by<span class="op">=</span><span class="va">treatment</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">treatment</span>,<span class="va">mean</span>,fill<span class="op">=</span><span class="va">treatment</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_errorbar</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>ymin<span class="op">=</span><span class="va">mean</span><span class="op">-</span><span class="va">sd</span>,ymax<span class="op">=</span><span class="va">mean</span><span class="op">+</span><span class="va">sd</span><span class="op">)</span>,width<span class="op">=</span><span class="fl">.2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 20 Columns: 2</span></span>
<span><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; Delimiter: ","</span></span>
<span><span class="co">#&gt; chr (1): treatment</span></span>
<span><span class="co">#&gt; dbl (1): liverweight</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-22-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_dotplot" class="level4" data-number="1.2.2.3"><h4 data-number="1.2.2.3" class="anchored" data-anchor-id="geom_dotplot">
<span class="header-section-number">1.2.2.3</span> geom_dotplot</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_dotplot.html">geom_dotplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">drv</span>,y<span class="op">=</span><span class="va">hwy</span><span class="op">)</span>,</span>
<span>                 position <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>                 stackdir <span class="op">=</span> <span class="st">"center"</span>,binaxis <span class="op">=</span> <span class="st">'y'</span>,<span class="co"># stacking along y axis</span></span>
<span>                 fill<span class="op">=</span><span class="st">"red"</span>,binwidth <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-23-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_boxplot" class="level4" data-number="1.2.2.4"><h4 data-number="1.2.2.4" class="anchored" data-anchor-id="geom_boxplot">
<span class="header-section-number">1.2.2.4</span> geom_boxplot</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">drv</span>,y<span class="op">=</span><span class="va">hwy</span><span class="op">)</span>,</span>
<span>             stat <span class="op">=</span> <span class="st">"boxplot"</span>,position <span class="op">=</span> <span class="st">"dodge"</span>,</span>
<span>             notch<span class="op">=</span><span class="cn">TRUE</span>, varwidth<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>             width<span class="op">=</span><span class="fl">0.1</span>,fill<span class="op">=</span><span class="st">"green"</span></span>
<span>            <span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">drv</span>,y<span class="op">=</span><span class="va">hwy</span><span class="op">)</span>,alpha<span class="op">=</span><span class="fl">0.2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-24-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_violin" class="level4" data-number="1.2.2.5"><h4 data-number="1.2.2.5" class="anchored" data-anchor-id="geom_violin">
<span class="header-section-number">1.2.2.5</span> geom_violin</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_violin.html">geom_violin</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">drv</span>,y<span class="op">=</span><span class="va">hwy</span><span class="op">)</span>,</span>
<span>             stat <span class="op">=</span> <span class="st">"ydensity"</span>,position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-25-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="geom_tile" class="level4" data-number="1.2.2.6"><h4 data-number="1.2.2.6" class="anchored" data-anchor-id="geom_tile">
<span class="header-section-number">1.2.2.6</span> geom_tile</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># 设置随机数种子以确保结果的可重复性  </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>  </span>
<span>  </span>
<span><span class="co"># 生成随机数据集  </span></span>
<span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span>  </span>
<span>  year <span class="op">=</span> <span class="fl">2000</span><span class="op">:</span><span class="fl">2024</span>,  </span>
<span>  lung <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>,  </span>
<span>  liver <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>, </span>
<span>  bone <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>,  </span>
<span>  luk <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>,  </span>
<span>  eso <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>,  </span>
<span>  gas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>,   </span>
<span>  eye <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>,  </span>
<span>  brain <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>,  </span>
<span>  pan <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>,  </span>
<span>  kidney <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>,  </span>
<span>  breast<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html">runif</a></span><span class="op">(</span><span class="fl">25</span><span class="op">)</span>,  </span>
<span><span class="op">)</span>  <span class="op">|&gt;</span> <span class="fu">pivot_longer</span><span class="op">(</span>cols <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>                   names_to <span class="op">=</span> <span class="st">"cancer"</span>,</span>
<span>                   values_to <span class="op">=</span> <span class="st">"morbidity"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mydata</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">year</span>, <span class="va">cancer</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span><span class="va">morbidity</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient</a></span><span class="op">(</span>low <span class="op">=</span> <span class="st">"white"</span>, high <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-26-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section></section></section><section id="统计变换-statistical-transformations" class="level2" data-number="1.3"><h2 data-number="1.3" class="anchored" data-anchor-id="统计变换-statistical-transformations">
<span class="header-section-number">1.3</span> 统计变换 statistical transformations</h2>
<p>stat_bin()：geom_bar()，geom_freqpoly()，geom_histogram()</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op">%&gt;%</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span><span class="va">cyl</span> , y<span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"bar"</span>,fun <span class="op">=</span> <span class="va">mean</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-27-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>stat_bin2d()：geom_bin2d()</p>
<p>stat_bindot()：geom_dotplot()</p>
<p>stat_binhex()：geom_hex()</p>
<p>stat_boxplot()：geom_boxplot()</p>
<p>stat_contour()：geom_contour()</p>
<p>stat_quantile()：geom_quantile()</p>
<p>stat_smooth()：geom_smooth()</p>
<p>stat_sum()：geom_count()</p>
<p>stat_ecdf()：计算经验累积分布图。</p>
<p>stat_function()：根据 x 值的函数计算 y 值。</p>
<p>stat_summary()：将 Y 值汇总到不同的 X 值。</p>
<p>stat_summary2d() ：汇总分箱值。</p>
<p>stat_summary_hex()</p>
<p>stat_qq()：对分位数-分位数图执行计算。</p>
<p>stat_spoke()：将角度和半径转换为位置。</p>
<p>stat_unique()：删除重复的行。</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diamonds</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">cut</span>, y <span class="op">=</span> <span class="va">depth</span><span class="op">)</span>,</span>
<span>    geom <span class="op">=</span> <span class="st">"errorbar"</span>,</span>
<span>    fun.min <span class="op">=</span> <span class="va">min</span>,</span>
<span>    fun.max <span class="op">=</span> <span class="va">max</span>,</span>
<span>    fun <span class="op">=</span> <span class="va">mean</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-28-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">trans</span>, <span class="va">cty</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_summary.html">stat_summary</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"point"</span>, fun <span class="op">=</span> <span class="st">"mean"</span>, colour <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-28-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="位置调整-position-adjustments" class="level2" data-number="1.4"><h2 data-number="1.4" class="anchored" data-anchor-id="位置调整-position-adjustments">
<span class="header-section-number">1.4</span> 位置调整 position adjustments</h2>
<section id="条偏移" class="level4" data-number="1.4.0.1"><h4 data-number="1.4.0.1" class="anchored" data-anchor-id="条偏移">
<span class="header-section-number">1.4.0.1</span> 条偏移</h4>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">drv</span>, fill <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">5</span>, position <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span><span class="op">|</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">drv</span>, color <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NA</span>, position <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-29-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">drv</span>, fill <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span><span class="op">|</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">drv</span>, fill <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-29-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="点偏移" class="level4" data-number="1.4.0.2"><h4 data-number="1.4.0.2" class="anchored" data-anchor-id="点偏移">
<span class="header-section-number">1.4.0.2</span> 点偏移</h4>
<p>position_nudge()：按固定偏移量移动点。</p>
<p>position_jitter()：为每个位置添加一点随机噪音。</p>
<p>position_jitterdodge()：躲避组内的点，然后添加一点随机噪音。</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">|</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"jitter"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-30-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>position <span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_nudge.html">position_nudge</a></span><span class="op">(</span>x<span class="op">=</span><span class="fl">0.1</span>,y<span class="op">=</span><span class="fl">0</span><span class="op">)</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">hwy</span>,color<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_jitterdodge.html">position_jitterdodge</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-30-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="坐标系-coordinate" class="level2" data-number="1.5"><h2 data-number="1.5" class="anchored" data-anchor-id="坐标系-coordinate">
<span class="header-section-number">1.5</span> 坐标系 coordinate</h2>
<p>默认坐标系是笛卡尔坐标系</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">diamonds</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">clarity</span>, fill <span class="op">=</span> <span class="va">clarity</span><span class="op">)</span>, </span>
<span>    show.legend <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    width <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>aspect.ratio <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">bar</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-31-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">bar</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|</span><span class="co">#笛卡尔坐标</span></span>
<span><span class="va">bar</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span><span class="op">|</span> <span class="co">#水平条形图</span></span>
<span><span class="va">bar</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_polar.html">coord_polar</a></span><span class="op">(</span><span class="op">)</span><span class="co">#极坐标</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-31-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="坐标轴-axis" class="level2" data-number="1.6"><h2 data-number="1.6" class="anchored" data-anchor-id="坐标轴-axis">
<span class="header-section-number">1.6</span> 坐标轴 axis</h2>
<section id="变换" class="level3" data-number="1.6.1"><h3 data-number="1.6.1" class="anchored" data-anchor-id="变换">
<span class="header-section-number">1.6.1</span> 变换</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb44"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log10</a></span><span class="op">(</span><span class="va">cty</span><span class="op">)</span>,<span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-32-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="limits" class="level3" data-number="1.6.2"><h3 data-number="1.6.2" class="anchored" data-anchor-id="limits">
<span class="header-section-number">1.6.2</span> limits</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|</span> </span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">xlim</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">25</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-33-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">drv</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.25</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">xlim</a></span><span class="op">(</span><span class="st">"f"</span>, <span class="st">"r"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html">ylim</a></span><span class="op">(</span><span class="fl">25</span>, <span class="cn">NA</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-33-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># filter</span></span>
<span><span class="va">mpg</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">displ</span> <span class="op">&gt;=</span> <span class="fl">5</span> <span class="op">&amp;</span> <span class="va">displ</span> <span class="op">&lt;=</span> <span class="fl">6</span> <span class="op">&amp;</span> <span class="va">hwy</span> <span class="op">&gt;=</span> <span class="fl">10</span> <span class="op">&amp;</span> <span class="va">hwy</span> <span class="op">&lt;=</span> <span class="fl">25</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="co"># limits</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>    <span class="co">#取子集</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">25</span><span class="op">)</span><span class="op">)</span>  </span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span>
<span><span class="co">#&gt; Warning: Removed 202 rows containing missing values or values outside the scale range</span></span>
<span><span class="co">#&gt; (`geom_point()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-34-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="zooming" class="level3" data-number="1.6.3"><h3 data-number="1.6.3" class="anchored" data-anchor-id="zooming">
<span class="header-section-number">1.6.3</span> zooming</h3>
<p>调整绘制的数据,在每个刻度中设置<code>coord_cartesian(xlim= ,ylim= )</code></p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html">coord_cartesian</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">25</span><span class="op">)</span><span class="op">)</span>   <span class="co">#放大局部</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-35-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="共享" class="level3" data-number="1.6.4"><h3 data-number="1.6.4" class="anchored" data-anchor-id="共享">
<span class="header-section-number">1.6.4</span> 共享</h3>
<p>shared 坐标轴相同</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">x_scale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">$</span><span class="va">displ</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">y_scale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/range.html">range</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">$</span><span class="va">hwy</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">col_scale</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_color_discrete</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html">unique</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">$</span><span class="va">drv</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">[</span><span class="va">mpg</span><span class="op">$</span><span class="va">class</span><span class="op">==</span><span class="st">"suv"</span>,<span class="op">]</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span>, color <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">x_scale</span> <span class="op">+</span></span>
<span>  <span class="va">y_scale</span> <span class="op">+</span></span>
<span>  <span class="va">col_scale</span><span class="op">|</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">[</span><span class="va">mpg</span><span class="op">$</span><span class="va">class</span><span class="op">==</span><span class="st">"compact"</span>,<span class="op">]</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span>, color <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="va">x_scale</span> <span class="op">+</span></span>
<span>  <span class="va">y_scale</span> <span class="op">+</span></span>
<span>  <span class="va">col_scale</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-36-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="标题-labels" class="level2" data-number="1.7"><h2 data-number="1.7" class="anchored" data-anchor-id="标题-labels">
<span class="header-section-number">1.7</span> 标题 labels</h2>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">cty</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">1</span> <span class="op">/</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"city driving (mpg)"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"highway driving (mpg)"</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"主标题"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-37-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Engine displacement (L)"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Highway fuel economy (mpg)"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Car type"</span>, <span class="co"># 图例 美学映射color</span></span>
<span>    title <span class="op">=</span> <span class="st">"Fuel efficiency generally decreases with engine size"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Two seaters (sports cars) are an </span></span>
<span><span class="st">    exception because of their light weight"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Data from fueleconomy.gov"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-37-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="注释-annotation" class="level2" data-number="1.8"><h2 data-number="1.8" class="anchored" data-anchor-id="注释-annotation">
<span class="header-section-number">1.8</span> 注释 annotation</h2>
<section id="文本-text" class="level3" data-number="1.8.1"><h3 data-number="1.8.1" class="anchored" data-anchor-id="文本-text">
<span class="header-section-number">1.8.1</span> 文本 text</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># 字体</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span>, y <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">1</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"sans"</span>, <span class="st">"serif"</span>, <span class="st">"mono"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">family</span>, family <span class="op">=</span> <span class="va">family</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-38-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># 样式</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span>, y <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">1</span>, face <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"plain"</span>, <span class="st">"bold"</span>, <span class="st">"italic"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">face</span>, fontface <span class="op">=</span> <span class="va">face</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-38-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># 位置</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">1.5</span><span class="op">)</span>,</span>
<span>  text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"bottom-left"</span>, <span class="st">"top-left"</span>,  </span>
<span>    <span class="st">"bottom-right"</span>, <span class="st">"top-right"</span>, <span class="st">"center"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">text</span><span class="op">)</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">text</span><span class="op">)</span>, vjust <span class="op">=</span> <span class="st">"inward"</span>, hjust <span class="op">=</span> <span class="st">"inward"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-38-3.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span></span>
<span><span class="co"># 自定义</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  treatment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span>, </span>
<span>  response <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.2</span>, <span class="fl">3.4</span>, <span class="fl">2.5</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">treatment</span>, <span class="va">response</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span></span>
<span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"("</span>, <span class="va">response</span>, <span class="st">")"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>    nudge_x <span class="op">=</span> <span class="op">-</span><span class="fl">0.3</span>,</span>
<span>    nudge_y<span class="op">=</span><span class="fl">.2</span></span>
<span>  <span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-38-4.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mtcars</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">cyl</span>,<span class="va">am</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">summarise</span><span class="op">(</span>n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>pct <span class="op">=</span> <span class="va">n</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>,</span>
<span>         lbls <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/percent_format.html">percent</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span></span>
<span>         <span class="op">)</span><span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>,<span class="va">pct</span>,fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">am</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>,position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label<span class="op">=</span><span class="va">lbls</span><span class="op">)</span>,</span>
<span>              position <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/position_stack.html">position_stack</a></span><span class="op">(</span>vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>              size<span class="op">=</span><span class="fl">3</span></span>
<span>              <span class="op">)</span></span>
<span><span class="co">#&gt; `summarise()` has grouped output by 'cyl'. You can override using the `.groups`</span></span>
<span><span class="co">#&gt; argument.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-39-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">label_info</span> <span class="op">&lt;-</span> <span class="va">mpg</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">drv</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">displ</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">slice_head</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        drive_type <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span>       <span class="co"># vectorise multiple if_else () statements </span></span>
<span>        <span class="va">drv</span> <span class="op">==</span> <span class="st">"f"</span> <span class="op">~</span> <span class="st">"front-wheel drive"</span>,</span>
<span>        <span class="va">drv</span> <span class="op">==</span> <span class="st">"r"</span> <span class="op">~</span> <span class="st">"rear-wheel drive"</span>,</span>
<span>        <span class="va">drv</span> <span class="op">==</span> <span class="st">"4"</span> <span class="op">~</span> <span class="st">"4-wheel drive"</span><span class="op">)</span></span>
<span>        <span class="op">)</span><span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span>, <span class="va">drv</span>, <span class="va">drive_type</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span>, color <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span>,formula<span class="op">=</span><span class="st">"y~x"</span>,se <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span><span class="op">+</span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="co">#添加注释  geom_label 标签加背景框</span></span>
<span>    data <span class="op">=</span> <span class="va">label_info</span>, </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span>, label <span class="op">=</span> <span class="va">drive_type</span><span class="op">)</span>,<span class="co">#label映射</span></span>
<span>    fontface <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">5</span>, nudge_y <span class="op">=</span> <span class="fl">2</span></span>
<span>    <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-40-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu">ggrepel</span><span class="fu">::</span><span class="fu"><a href="https://ggrepel.slowkow.com/reference/geom_text_repel.html">geom_label_repel</a></span><span class="op">(</span>                   </span>
<span>    data <span class="op">=</span> <span class="va">label_info</span>, </span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span>, label <span class="op">=</span> <span class="va">drive_type</span><span class="op">)</span>,</span>
<span>    fontface <span class="op">=</span> <span class="st">"bold"</span>, size <span class="op">=</span> <span class="fl">5</span>, nudge_y <span class="op">=</span> <span class="fl">2</span></span>
<span>  <span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-40-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span></span>
<span><span class="va">potential_outliers</span> <span class="op">&lt;-</span> <span class="va">mpg</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">hwy</span> <span class="op">&gt;</span> <span class="fl">40</span> <span class="op">|</span> <span class="op">(</span><span class="va">hwy</span> <span class="op">&gt;</span> <span class="fl">20</span> <span class="op">&amp;</span> <span class="va">displ</span> <span class="op">&gt;</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggrepel</span><span class="fu">::</span><span class="fu"><a href="https://ggrepel.slowkow.com/reference/geom_text_repel.html">geom_text_repel</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">potential_outliers</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">model</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">potential_outliers</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">potential_outliers</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"red"</span>, size <span class="op">=</span> <span class="fl">3</span>, shape <span class="op">=</span> <span class="st">"circle open"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-40-3.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="markdown" class="level3" data-number="1.8.2"><h3 data-number="1.8.2" class="anchored" data-anchor-id="markdown">
<span class="header-section-number">1.8.2</span> markdown</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb60"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, y <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">base</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Axis title with *italics* and **boldface**"</span><span class="op">)</span></span>
<span><span class="va">base</span> <span class="op">|</span></span>
<span><span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.title.x <span class="op">=</span> <span class="fu">ggtext</span><span class="fu">::</span><span class="fu"><a href="https://wilkelab.org/ggtext/reference/element_markdown.html">element_markdown</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>  <span class="co">#ggtext::element_markdown</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-41-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="数学表达式" class="level3" data-number="1.8.3"><h3 data-number="1.8.3" class="anchored" data-anchor-id="数学表达式">
<span class="header-section-number">1.8.3</span> 数学表达式</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">tibble</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html">quote</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html">quote</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">^</span> <span class="fl">2</span>, <span class="va">i</span> <span class="op">==</span> <span class="fl">1</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="co">#数学方程式</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-42-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb62"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="op">-</span><span class="fl">2</span>, to <span class="op">=</span> <span class="fl">2</span>, by <span class="op">=</span> <span class="fl">.01</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">values</span>, y <span class="op">=</span> <span class="va">values</span> <span class="op">^</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_path</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/substitute.html">quote</a></span><span class="op">(</span><span class="fu">f</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">==</span> <span class="va">x</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>         <span class="co">#数学表达式   ？plotmath</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-42-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="线段-直线-箭头" class="level3" data-number="1.8.4"><h3 data-number="1.8.4" class="anchored" data-anchor-id="线段-直线-箭头">
<span class="header-section-number">1.8.4</span> 线段 直线 箭头</h3>
<p>geom_hline()</p>
<p>geom_vline()</p>
<p>geom_abline</p>
<p>geom_segment() arrow</p>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">trend_text</span> <span class="op">&lt;-</span> <span class="st">"Larger engine sizes tend to have lower fuel economy."</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">str_wrap</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span><span class="va">trend_text</span></span>
<span><span class="co">#&gt; [1] "Larger engine sizes tend to\nhave lower fuel economy."</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span></span>
<span>    geom <span class="op">=</span> <span class="st">"label"</span>, x <span class="op">=</span> <span class="fl">3.5</span>, y <span class="op">=</span> <span class="fl">38</span>,</span>
<span>    label <span class="op">=</span> <span class="va">trend_text</span>,</span>
<span>    hjust <span class="op">=</span> <span class="st">"left"</span>, color <span class="op">=</span> <span class="st">"red"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span></span>
<span>    geom <span class="op">=</span> <span class="st">"segment"</span>,</span>
<span>    x <span class="op">=</span> <span class="fl">3</span>, y <span class="op">=</span> <span class="fl">35</span>, xend <span class="op">=</span> <span class="fl">5</span>, yend <span class="op">=</span> <span class="fl">25</span>, color <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>    arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html">arrow</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"closed"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-43-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb64"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="va">manufacturer</span> <span class="op">==</span> <span class="st">"subaru"</span><span class="op">)</span>, </span>
<span>    colour <span class="op">=</span> <span class="st">"orange"</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="va">p</span><span class="op">|</span><span class="va">p</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"point"</span>, x <span class="op">=</span> <span class="fl">5.5</span>, y <span class="op">=</span> <span class="fl">40</span>, colour <span class="op">=</span> <span class="st">"orange"</span>, size <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"point"</span>, x <span class="op">=</span> <span class="fl">5.5</span>, y <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">5.6</span>, y <span class="op">=</span> <span class="fl">40</span>, label <span class="op">=</span> <span class="st">"subaru"</span>, hjust <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="va">p</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span></span>
<span>    geom <span class="op">=</span> <span class="st">"curve"</span>, x <span class="op">=</span> <span class="fl">4</span>, y <span class="op">=</span> <span class="fl">35</span>, xend <span class="op">=</span> <span class="fl">2.65</span>, yend <span class="op">=</span> <span class="fl">27</span>, </span>
<span>    curvature <span class="op">=</span> <span class="fl">.3</span>, arrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/arrow.html">arrow</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">"mm"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span>geom <span class="op">=</span> <span class="st">"text"</span>, x <span class="op">=</span> <span class="fl">4.1</span>, y <span class="op">=</span> <span class="fl">35</span>, label <span class="op">=</span> <span class="st">"subaru"</span>, hjust <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-44-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="scale" class="level2" data-number="1.9"><h2 data-number="1.9" class="anchored" data-anchor-id="scale">
<span class="header-section-number">1.9</span> scale</h2>
<section id="xy_continuous" class="level3" data-number="1.9.1"><h3 data-number="1.9.1" class="anchored" data-anchor-id="xy_continuous">
<span class="header-section-number">1.9.1</span> x/y_continuous</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wt</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Weight (1000 lbs.)"</span>,   </span>
<span>                     n.breaks <span class="op">=</span> <span class="fl">10</span>,                 </span>
<span>                     minor_breaks <span class="op">=</span> <span class="cn">NULL</span>,           </span>
<span>                     limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">5.5</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>        </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Miles per gallon"</span>,     </span>
<span>                     breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">35</span>, <span class="fl">5</span><span class="op">)</span>,       </span>
<span>                     minor_breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">35</span>, <span class="fl">1</span><span class="op">)</span>, </span>
<span>                     limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">35</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>          </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Fuel efficiency by car weight"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-45-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb66"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diamonds</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">price</span>, y <span class="op">=</span> <span class="va">cut</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/dollar_format.html">label_dollar</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">1000</span>, suffix <span class="op">=</span> <span class="st">"K"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-46-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">diamonds</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">cut</span>, fill <span class="op">=</span> <span class="va">clarity</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_continuous</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Percentage"</span>, labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/label_percent.html">label_percent</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-46-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="xy_discrete" class="level3" data-number="1.9.2"><h3 data-number="1.9.2" class="anchored" data-anchor-id="xy_discrete">
<span class="header-section-number">1.9.2</span> x/y_discrete</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">drv</span><span class="op">)</span>,fill<span class="op">=</span><span class="va">class</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">-&gt;</span><span class="va">p</span></span>
<span><span class="va">p</span> <span class="op">|</span> <span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html">scale_x_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"drv"</span>,                                  </span>
<span>                   limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"f"</span>, <span class="st">"r"</span><span class="op">)</span>,    </span>
<span>                   labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'f'</span><span class="op">=</span><span class="st">"drv='f'"</span>,<span class="st">'r'</span><span class="op">=</span> <span class="st">"drv='r'"</span><span class="op">)</span>,</span>
<span>                   position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; Warning: Removed 103 rows containing non-finite outside the scale range</span></span>
<span><span class="co">#&gt; (`stat_count()`).</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-47-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="color-1" class="level3" data-number="1.9.3"><h3 data-number="1.9.3" class="anchored" data-anchor-id="color-1">
<span class="header-section-number">1.9.3</span> color</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">RColorBrewer</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html">display.brewer.all</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-48-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">displ</span>, y<span class="op">=</span><span class="va">hwy</span>, color<span class="op">=</span><span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>shape<span class="op">=</span><span class="fl">19</span>, size<span class="op">=</span><span class="fl">3</span><span class="op">)</span> </span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu">ggthemes</span><span class="fu">::</span><span class="fu"><a href="http://jrnold.github.io/ggthemes/reference/colorblind.html">scale_color_colorblind</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-48-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">displ</span>, y<span class="op">=</span><span class="va">hwy</span>, color<span class="op">=</span><span class="va">cty</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"A. Default color gradient"</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_color_gradient</a></span><span class="op">(</span>low<span class="op">=</span><span class="st">"grey"</span>, high<span class="op">=</span><span class="st">"black"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"B. Greyscale gradient"</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_color_gradient</a></span><span class="op">(</span>low<span class="op">=</span><span class="st">"red"</span>, high<span class="op">=</span><span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"C. Red-blue color gradient"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-49-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb72"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_steps.html">scale_color_steps</a></span><span class="op">(</span>low<span class="op">=</span><span class="st">"red"</span>, high<span class="op">=</span><span class="st">"blue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"D. Red-blue binned color Gradient"</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_steps.html">scale_color_steps2</a></span><span class="op">(</span>low<span class="op">=</span><span class="st">"red"</span>, mid<span class="op">=</span><span class="st">"white"</span>, high<span class="op">=</span><span class="st">"blue"</span>,</span>
<span>                       midpoint<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">disp</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"E. Red-white-blue binned gradient"</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_color_viridis_c</a></span><span class="op">(</span>direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">+</span>    <span class="co"># viridis_c,d,b</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"F. Viridis color gradient"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-49-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb73"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">10000</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">10000</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">geom_hex</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Default, continuous"</span>, x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Computation failed in `stat_binhex()`.</span></span>
<span><span class="co">#&gt; Caused by error in `compute_group()`:</span></span>
<span><span class="co">#&gt; ! The package "hexbin" is required for `stat_bin_hex()`.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-50-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb74"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">geom_hex</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Viridis, continuous"</span>, x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Computation failed in `stat_binhex()`.</span></span>
<span><span class="co">#&gt; Caused by error in `compute_group()`:</span></span>
<span><span class="co">#&gt; ! The package "hexbin" is required for `stat_bin_hex()`.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-50-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb75"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">df</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_hex.html">geom_hex</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html">coord_fixed</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_b</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Viridis, binned"</span>, x <span class="op">=</span> <span class="cn">NULL</span>, y <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: Computation failed in `stat_binhex()`.</span></span>
<span><span class="co">#&gt; Caused by error in `compute_group()`:</span></span>
<span><span class="co">#&gt; ! The package "hexbin" is required for `stat_bin_hex()`.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-50-3.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="fill-1" class="level3" data-number="1.9.4"><h3 data-number="1.9.4" class="anchored" data-anchor-id="fill-1">
<span class="header-section-number">1.9.4</span> fill</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb76"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">drv</span>,fill<span class="op">=</span><span class="va">class</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"A. Default colors"</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html">scale_fill_brewer</a></span><span class="op">(</span>palette<span class="op">=</span><span class="st">"Set2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"B. ColorBrewer Set2 palette"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-51-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb77"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html">scale_fill_viridis_d</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"C. Viridis color scheme"</span><span class="op">)</span><span class="op">|</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gold4"</span>, <span class="st">"orange2"</span>, <span class="st">"deepskyblue3"</span>, <span class="st">"blue4"</span>,</span>
<span>                               <span class="st">"brown2"</span>, <span class="st">"yellowgreen"</span>,<span class="st">"lightpink"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"D. Manual color selection"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-51-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="分面" class="level2" data-number="1.10"><h2 data-number="1.10" class="anchored" data-anchor-id="分面">
<span class="header-section-number">1.10</span> 分面</h2>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb78"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">q</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">displ</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>fill<span class="op">=</span><span class="st">"lightblue"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 一个分类变量</span></span>
<span><span class="va">q</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">drv</span>,nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-52-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb79"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">q</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">drv</span>,ncol <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>  <span class="co">#</span></span>
<span><span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-52-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb80"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># 多个分类变量</span></span>
<span><span class="va">q</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">drv</span><span class="op">~</span><span class="va">class</span><span class="op">)</span></span>
<span><span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-52-3.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb81"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">q</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">drv</span><span class="op">~</span><span class="va">.</span><span class="op">)</span></span>
<span><span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-52-4.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">q</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">.</span><span class="op">~</span><span class="va">drv</span><span class="op">)</span>   <span class="co">#</span></span>
<span><span class="co">#&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-52-5.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb83"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">drv</span> <span class="op">~</span> <span class="va">cyl</span><span class="op">)</span> <span class="op">|</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html">facet_grid</a></span><span class="op">(</span><span class="va">drv</span> <span class="op">~</span> <span class="va">cyl</span>, scales <span class="op">=</span> <span class="st">"free_y"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-53-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="主题" class="level2" data-number="1.11"><h2 data-number="1.11" class="anchored" data-anchor-id="主题">
<span class="header-section-number">1.11</span> 主题</h2>
<section id="内置主题" class="level3" data-number="1.11.1"><h3 data-number="1.11.1" class="anchored" data-anchor-id="内置主题">
<span class="header-section-number">1.11.1</span> 内置主题</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>,<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>,<span class="va">hwy</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_grey</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"theme_grey"</span><span class="op">)</span>  <span class="op">|</span></span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"theme_bw"</span><span class="op">)</span>  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-54-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb85"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"theme_minimal"</span><span class="op">)</span><span class="op">|</span>  </span>
<span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"theme_classic"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-54-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="字体" class="level3" data-number="1.11.2"><h3 data-number="1.11.2" class="anchored" data-anchor-id="字体">
<span class="header-section-number">1.11.2</span> 字体</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">findfont</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/yixuan/showtext">showtext</a></span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressMessages</a></span><span class="op">(</span><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_files.html">font_files</a></span><span class="op">(</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">family</span>, ignore.case<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">path</span>, <span class="va">file</span>, <span class="va">family</span>, <span class="va">face</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">findfont</span><span class="op">(</span><span class="st">"comic"</span><span class="op">)</span></span>
<span><span class="co">#&gt;               path        file        family        face</span></span>
<span><span class="co">#&gt; 1 C:/Windows/Fonts   comic.ttf Comic Sans MS     Regular</span></span>
<span><span class="co">#&gt; 2 C:/Windows/Fonts comicbd.ttf Comic Sans MS        Bold</span></span>
<span><span class="co">#&gt; 3 C:/Windows/Fonts  comici.ttf Comic Sans MS      Italic</span></span>
<span><span class="co">#&gt; 4 C:/Windows/Fonts  comicz.ttf Comic Sans MS Bold Italic</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_add.html">font_add</a></span><span class="op">(</span>family <span class="op">=</span> <span class="st">"Times New Roman"</span>, regular <span class="op">=</span> <span class="st">"C:\\Windows\\Fonts\\Times New Roman\\times.ttf"</span>,</span>
<span>         bold <span class="op">=</span> <span class="st">"C:\\Windows\\Fonts\\Times New Roman\\timesbd.ttf"</span>,</span>
<span>         italic <span class="op">=</span> <span class="st">"C:\\Windows\\Fonts\\Times New Roman\\timesi.ttf"</span>,</span>
<span>         bolditalic <span class="op">=</span> <span class="st">"C:\\Windows\\Fonts\\Times New Roman\\timesbi.ttf"</span><span class="op">)</span></span>
<span><span class="fu">findfont</span><span class="op">(</span><span class="st">"Times New Roman"</span><span class="op">)</span></span>
<span><span class="co">#&gt;               path        file          family        face</span></span>
<span><span class="co">#&gt; 1 C:/Windows/Fonts   times.ttf Times New Roman     Regular</span></span>
<span><span class="co">#&gt; 2 C:/Windows/Fonts timesbd.ttf Times New Roman        Bold</span></span>
<span><span class="co">#&gt; 3 C:/Windows/Fonts timesbi.ttf Times New Roman Bold Italic</span></span>
<span><span class="co">#&gt; 4 C:/Windows/Fonts  timesi.ttf Times New Roman      Italic</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/sysfonts/man/font_families.html">font_families</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "sans"                        "serif"                      </span></span>
<span><span class="co">#&gt;  [3] "mono"                        "wqy-microhei"               </span></span>
<span><span class="co">#&gt;  [5] "Times New Roman Regular"     "Times New Roman Bold"       </span></span>
<span><span class="co">#&gt;  [7] "Times New Roman Bold Italic" "Times New Roman Italic"     </span></span>
<span><span class="co">#&gt;  [9] "黑体 常规"                   "楷体 常规"                  </span></span>
<span><span class="co">#&gt; [11] "Times New Roman"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="自定义主题" class="level3" data-number="1.11.3"><h3 data-number="1.11.3" class="anchored" data-anchor-id="自定义主题">
<span class="header-section-number">1.11.3</span> 自定义主题</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb87"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mytheme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>plot.title<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face<span class="op">=</span><span class="st">"bold.italic"</span>,  size<span class="op">=</span><span class="st">"14"</span>, color<span class="op">=</span><span class="st">"brown"</span><span class="op">)</span>,</span>
<span>                 axis.title<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face<span class="op">=</span><span class="st">"bold.italic"</span>,  size<span class="op">=</span><span class="fl">10</span>, color<span class="op">=</span><span class="st">"brown"</span><span class="op">)</span>,</span>
<span>                 axis.text<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face<span class="op">=</span><span class="st">"bold"</span>, size<span class="op">=</span><span class="fl">9</span>,  color<span class="op">=</span><span class="st">"darkblue"</span><span class="op">)</span>, </span>
<span>                 panel.background<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill<span class="op">=</span><span class="st">"white"</span>,  color<span class="op">=</span><span class="st">"darkblue"</span><span class="op">)</span>,  </span>
<span>                 panel.grid.major.y<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"grey"</span>,  linetype<span class="op">=</span><span class="fl">1</span><span class="op">)</span>,  </span>
<span>                 panel.grid.minor.y<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"grey"</span>,  linetype<span class="op">=</span><span class="fl">2</span><span class="op">)</span>,  </span>
<span>                 panel.grid.minor.x<span class="op">=</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,  legend.position<span class="op">=</span><span class="st">"top"</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">drv</span>, y<span class="op">=</span><span class="va">hwy</span>, fill<span class="op">=</span><span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>  </span>
<span>  <span class="va">mytheme</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-56-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="图例" class="level3" data-number="1.11.4"><h3 data-number="1.11.4" class="anchored" data-anchor-id="图例">
<span class="header-section-number">1.11.4</span> 图例</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># 位置和布局</span></span>
<span><span class="va">base</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color <span class="op">=</span> <span class="va">class</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span> <span class="co"># the default</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-57-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb89"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">base</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"left"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-57-2.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">base</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-57-3.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb91"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">base</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guides.html">guides</a></span><span class="op">(</span>color <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/guide_legend.html">guide_legend</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="fl">2</span>, override.aes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-57-4.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb92"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="co"># 文本</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">wt</span>, <span class="va">mpg</span>, color <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_color_discrete</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"Cylinders"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Fuel Efficiency for 32 Automobiles"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Weight (1000 lbs)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Miles per gallon"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.95</span>, <span class="fl">.95</span><span class="op">)</span>,</span>
<span>        legend.justification <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>        legend.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"lightgrey"</span>,</span>
<span>                                         color <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>                                         linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>        legend.key <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        legend.direction <span class="op">=</span> <span class="st">"horizontal"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: A numeric `legend.position` argument in `theme()` was deprecated in ggplot2</span></span>
<span><span class="co">#&gt; 3.5.0.</span></span>
<span><span class="co">#&gt; ℹ Please use the `legend.position.inside` argument of `theme()` instead.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-57-5.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb93"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">displ</span>, y <span class="op">=</span> <span class="va">hwy</span>, color <span class="op">=</span> <span class="va">drv</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Larger engine sizes tend to have lower fuel economy"</span>,</span>
<span>    caption <span class="op">=</span> <span class="st">"Source: https://fueleconomy.gov."</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span></span>
<span>    legend.position <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">0.9</span><span class="op">)</span>,</span>
<span>    legend.direction <span class="op">=</span> <span class="st">"horizontal"</span>,</span>
<span>    legend.box.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>face <span class="op">=</span> <span class="st">"bold"</span>,hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    plot.title.position <span class="op">=</span> <span class="st">"plot"</span>,</span>
<span>    plot.caption.position <span class="op">=</span> <span class="st">"plot"</span>,</span>
<span>    plot.caption <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-58-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section><section id="绘图区" class="level3" data-number="1.11.5"><h3 data-number="1.11.5" class="anchored" data-anchor-id="绘图区">
<span class="header-section-number">1.11.5</span> 绘图区</h3>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb94"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mtcars</span><span class="op">$</span><span class="va">am</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">am</span>, labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Automatic"</span>, <span class="st">"Manual"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">mtcars</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">disp</span>, y <span class="op">=</span> <span class="va">mpg</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>                     </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>color<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span>, size<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span>                   </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html">geom_smooth</a></span><span class="op">(</span>method<span class="op">=</span><span class="st">"lm"</span>, formula <span class="op">=</span> <span class="va">y</span> <span class="op">~</span> <span class="va">x</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html">I</a></span><span class="op">(</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span>,                             </span>
<span>              linetype<span class="op">=</span><span class="st">"dotted"</span>, se<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">scale_color_discrete</a></span><span class="op">(</span><span class="st">"Number of cylinders"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">am</span>, ncol<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span>                                      </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Mileage, transmission type, and number of cylinders"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Engine displacement (cu. in.)"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Miles per gallon"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>                                                  </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>strip.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span>,</span>
<span>        panel.grid.major <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"lightgrey"</span><span class="op">)</span>,</span>
<span>        panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_line</a></span><span class="op">(</span>color<span class="op">=</span><span class="st">"lightgrey"</span>,</span>
<span>                                        linetype<span class="op">=</span><span class="st">"dashed"</span><span class="op">)</span>,</span>
<span>        axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>        legend.key <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-59-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details open="" class="code-fold"><summary>Code</summary><div class="sourceCode" id="cb95"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span>
<span></span>
<span><span class="va">gray_gradient</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/grid/patterns.html">linearGradient</a></span><span class="op">(</span><span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/pal_grey.html">pal_grey</a></span><span class="op">(</span><span class="op">)</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">mpg</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">displ</span>, <span class="va">hwy</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">gray_gradient</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><img src="ggplot2_graphics_files/figure-html/unnamed-chunk-60-1.svg" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>


<!-- -->

</section></section></section><a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb96" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># ggplot2 Graphics {#sec-ggplot2 style="color:red"}</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">ggplot2：用于数据分析的优雅图形</span><span class="co">](https://ggplot2-book.org/mastery)</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>gg 为 grammar of graphics 的缩写。</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a><span class="fu">## `ggplot`</span></span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-19"><a href="#cb96-19" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb96-20"><a href="#cb96-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">index =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">26</span>,</span>
<span id="cb96-21"><a href="#cb96-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">pch =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">25</span>,</span>
<span id="cb96-22"><a href="#cb96-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="fu">c</span>( <span class="fu">rep</span>(<span class="st">"hollow_color"</span>,<span class="dv">15</span>),<span class="fu">rep</span>(<span class="st">"soild_color"</span>,<span class="dv">6</span>),<span class="fu">rep</span>(<span class="st">"fill_color"</span>,<span class="dv">5</span>)),</span>
<span id="cb96-23"><a href="#cb96-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">height =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="at">times =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">6</span>,<span class="dv">5</span>)),</span>
<span id="cb96-24"><a href="#cb96-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb96-25"><a href="#cb96-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-26"><a href="#cb96-26" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-27"><a href="#cb96-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-28"><a href="#cb96-28" aria-hidden="true" tabindex="-1"></a><span class="in">`ggplot(data =  ,mapping = aes(x,y,…))`</span></span>
<span id="cb96-29"><a href="#cb96-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-30"><a href="#cb96-30" aria-hidden="true" tabindex="-1"></a>创建一个基础图形对象<span class="in">`gg`</span>，空白图层 + 数据集 + 美学映射。</span>
<span id="cb96-31"><a href="#cb96-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-32"><a href="#cb96-32" aria-hidden="true" tabindex="-1"></a><span class="fu">### aesthetics mapping</span></span>
<span id="cb96-33"><a href="#cb96-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-34"><a href="#cb96-34" aria-hidden="true" tabindex="-1"></a><span class="in">`mapping=aes(x,y,z,..,color,fill,shape,size,group,linewidth,linetype,alpha,...)`</span></span>
<span id="cb96-35"><a href="#cb96-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-38"><a href="#cb96-38" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-39"><a href="#cb96-39" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df,</span>
<span id="cb96-40"><a href="#cb96-40" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> index, <span class="at">y =</span> pch ))</span>
<span id="cb96-41"><a href="#cb96-41" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-42"><a href="#cb96-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-43"><a href="#cb96-43" aria-hidden="true" tabindex="-1"></a><span class="fu">#### color</span></span>
<span id="cb96-44"><a href="#cb96-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-45"><a href="#cb96-45" aria-hidden="true" tabindex="-1"></a><span class="fu">#### fill</span></span>
<span id="cb96-46"><a href="#cb96-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-49"><a href="#cb96-49" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-50"><a href="#cb96-50" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(grid)</span>
<span id="cb96-51"><a href="#cb96-51" aria-hidden="true" tabindex="-1"></a>colours <span class="ot">&lt;-</span> scales<span class="sc">::</span><span class="fu">viridis_pal</span>()(<span class="dv">10</span>)</span>
<span id="cb96-52"><a href="#cb96-52" aria-hidden="true" tabindex="-1"></a>patterns <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb96-53"><a href="#cb96-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linearGradient</span>(colours, <span class="at">group =</span> <span class="cn">FALSE</span>),</span>
<span id="cb96-54"><a href="#cb96-54" aria-hidden="true" tabindex="-1"></a>  <span class="st">"limegreen"</span>,</span>
<span id="cb96-55"><a href="#cb96-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">radialGradient</span>(colours, <span class="at">group =</span> <span class="cn">FALSE</span>),</span>
<span id="cb96-56"><a href="#cb96-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pattern</span>(</span>
<span id="cb96-57"><a href="#cb96-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rectGrob</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>), <span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">height =</span> <span class="fl">0.5</span>),</span>
<span id="cb96-58"><a href="#cb96-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>), <span class="at">height =</span> <span class="fu">unit</span>(<span class="dv">5</span>, <span class="st">"mm"</span>), <span class="at">extend =</span> <span class="st">"repeat"</span>,</span>
<span id="cb96-59"><a href="#cb96-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">gp =</span> <span class="fu">gpar</span>(<span class="at">fill =</span> <span class="st">"limegreen"</span>)</span>
<span id="cb96-60"><a href="#cb96-60" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-61"><a href="#cb96-61" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-62"><a href="#cb96-62" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="fu">factor</span>(cyl), <span class="at">fill =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb96-63"><a href="#cb96-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb96-64"><a href="#cb96-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> patterns)</span>
<span id="cb96-65"><a href="#cb96-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-66"><a href="#cb96-66" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-67"><a href="#cb96-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-68"><a href="#cb96-68" aria-hidden="true" tabindex="-1"></a><span class="fu">#### shape</span></span>
<span id="cb96-69"><a href="#cb96-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-72"><a href="#cb96-72" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-73"><a href="#cb96-73" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> index, <span class="at">y =</span> pch)) <span class="sc">+</span></span>
<span id="cb96-74"><a href="#cb96-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="st">"."</span>) <span class="co">#像素</span></span>
<span id="cb96-75"><a href="#cb96-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-76"><a href="#cb96-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-77"><a href="#cb96-77" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df, <span class="fu">aes</span>(index, pch)) <span class="sc">+</span></span>
<span id="cb96-78"><a href="#cb96-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">shape =</span> <span class="fu">factor</span>(pch)), <span class="at">fill =</span><span class="st">"red"</span>,<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb96-79"><a href="#cb96-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_manual</span>(<span class="at">values =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb96-80"><a href="#cb96-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">shape =</span> <span class="st">"点形状"</span> )</span>
<span id="cb96-81"><a href="#cb96-81" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-82"><a href="#cb96-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-85"><a href="#cb96-85" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-86"><a href="#cb96-86" aria-hidden="true" tabindex="-1"></a>shape_names <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb96-87"><a href="#cb96-87" aria-hidden="true" tabindex="-1"></a>  <span class="st">"circle"</span>, <span class="fu">paste</span>(<span class="st">"circle"</span>, <span class="fu">c</span>(<span class="st">"open"</span>, <span class="st">"filled"</span>, <span class="st">"cross"</span>, <span class="st">"plus"</span>, <span class="st">"small"</span>)), <span class="st">"bullet"</span>,</span>
<span id="cb96-88"><a href="#cb96-88" aria-hidden="true" tabindex="-1"></a>  <span class="st">"square"</span>, <span class="fu">paste</span>(<span class="st">"square"</span>, <span class="fu">c</span>(<span class="st">"open"</span>, <span class="st">"filled"</span>, <span class="st">"cross"</span>, <span class="st">"plus"</span>, <span class="st">"triangle"</span>)),</span>
<span id="cb96-89"><a href="#cb96-89" aria-hidden="true" tabindex="-1"></a>  <span class="st">"diamond"</span>, <span class="fu">paste</span>(<span class="st">"diamond"</span>, <span class="fu">c</span>(<span class="st">"open"</span>, <span class="st">"filled"</span>, <span class="st">"plus"</span>)),</span>
<span id="cb96-90"><a href="#cb96-90" aria-hidden="true" tabindex="-1"></a>  <span class="st">"triangle"</span>, <span class="fu">paste</span>(<span class="st">"triangle"</span>, <span class="fu">c</span>(<span class="st">"open"</span>, <span class="st">"filled"</span>, <span class="st">"square"</span>)),</span>
<span id="cb96-91"><a href="#cb96-91" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste</span>(<span class="st">"triangle down"</span>, <span class="fu">c</span>(<span class="st">"open"</span>, <span class="st">"filled"</span>)),</span>
<span id="cb96-92"><a href="#cb96-92" aria-hidden="true" tabindex="-1"></a>  <span class="st">"plus"</span>, <span class="st">"cross"</span>, <span class="st">"asterisk"</span></span>
<span id="cb96-93"><a href="#cb96-93" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-94"><a href="#cb96-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-95"><a href="#cb96-95" aria-hidden="true" tabindex="-1"></a>shapes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb96-96"><a href="#cb96-96" aria-hidden="true" tabindex="-1"></a>  <span class="at">shape_names =</span> shape_names,</span>
<span id="cb96-97"><a href="#cb96-97" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">6</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>),</span>
<span id="cb96-98"><a href="#cb96-98" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="sc">-</span><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb96-99"><a href="#cb96-99" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-100"><a href="#cb96-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-101"><a href="#cb96-101" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(shapes, <span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb96-102"><a href="#cb96-102" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">shape =</span> shape_names), <span class="at">fill =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb96-103"><a href="#cb96-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> shape_names), <span class="at">nudge_y =</span> <span class="sc">-</span><span class="fl">0.3</span>, <span class="at">size =</span> <span class="fl">3.5</span>) <span class="sc">+</span></span>
<span id="cb96-104"><a href="#cb96-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape_identity</span>() <span class="sc">+</span></span>
<span id="cb96-105"><a href="#cb96-105" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>()</span>
<span id="cb96-106"><a href="#cb96-106" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-107"><a href="#cb96-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-108"><a href="#cb96-108" aria-hidden="true" tabindex="-1"></a><span class="fu">## Geometry</span></span>
<span id="cb96-109"><a href="#cb96-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-110"><a href="#cb96-110" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>图形基元（Graphical primitives）:</span>
<span id="cb96-111"><a href="#cb96-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-112"><a href="#cb96-112" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_blank()`</span>: display nothing. Most useful for adjusting axes limits using data.</span>
<span id="cb96-113"><a href="#cb96-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-114"><a href="#cb96-114" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_point()`</span>: points.</span>
<span id="cb96-115"><a href="#cb96-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-116"><a href="#cb96-116" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_path()`</span>: paths.</span>
<span id="cb96-117"><a href="#cb96-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-118"><a href="#cb96-118" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_ribbon()`</span>: ribbons, a path with vertical thickness.</span>
<span id="cb96-119"><a href="#cb96-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-120"><a href="#cb96-120" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_segment()`</span>: a line segment, specified by start and end position.</span>
<span id="cb96-121"><a href="#cb96-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-122"><a href="#cb96-122" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_rect()`</span>: rectangles.</span>
<span id="cb96-123"><a href="#cb96-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-124"><a href="#cb96-124" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_polygon()`</span>: filled polygons.</span>
<span id="cb96-125"><a href="#cb96-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-126"><a href="#cb96-126" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_text()`</span>: text.</span>
<span id="cb96-127"><a href="#cb96-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-130"><a href="#cb96-130" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-131"><a href="#cb96-131" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb96-132"><a href="#cb96-132" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">5</span>), </span>
<span id="cb96-133"><a href="#cb96-133" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>), </span>
<span id="cb96-134"><a href="#cb96-134" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> <span class="fu">c</span>(<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>)</span>
<span id="cb96-135"><a href="#cb96-135" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-136"><a href="#cb96-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-137"><a href="#cb96-137" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(x, y, <span class="at">label =</span> label)) <span class="sc">+</span> </span>
<span id="cb96-138"><a href="#cb96-138" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span> <span class="co"># Hide axis label</span></span>
<span id="cb96-139"><a href="#cb96-139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">12</span>)) <span class="co"># Shrink plot title</span></span>
<span id="cb96-140"><a href="#cb96-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-141"><a href="#cb96-141" aria-hidden="true" tabindex="-1"></a>(p <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"point"</span>) <span class="sc">+</span></span>
<span id="cb96-142"><a href="#cb96-142" aria-hidden="true" tabindex="-1"></a>        p <span class="sc">+</span> <span class="fu">geom_text</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"text"</span>) <span class="sc">+</span></span>
<span id="cb96-143"><a href="#cb96-143" aria-hidden="true" tabindex="-1"></a>        p <span class="sc">+</span> <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"bar"</span>) )<span class="sc">/</span></span>
<span id="cb96-144"><a href="#cb96-144" aria-hidden="true" tabindex="-1"></a>(p <span class="sc">+</span> <span class="fu">geom_tile</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"tile"</span>) <span class="sc">+</span></span>
<span id="cb96-145"><a href="#cb96-145" aria-hidden="true" tabindex="-1"></a>     p <span class="sc">+</span> <span class="fu">geom_raster</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"raster"</span>)<span class="sc">+</span></span>
<span id="cb96-146"><a href="#cb96-146" aria-hidden="true" tabindex="-1"></a>     p <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"line"</span>)) <span class="sc">/</span></span>
<span id="cb96-147"><a href="#cb96-147" aria-hidden="true" tabindex="-1"></a>(p <span class="sc">+</span> <span class="fu">geom_area</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"area"</span>) <span class="sc">+</span></span>
<span id="cb96-148"><a href="#cb96-148" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">+</span> <span class="fu">geom_path</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"path"</span>) <span class="sc">+</span></span>
<span id="cb96-149"><a href="#cb96-149" aria-hidden="true" tabindex="-1"></a>    p <span class="sc">+</span> <span class="fu">geom_polygon</span>() <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"polygon"</span>))</span>
<span id="cb96-150"><a href="#cb96-150" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-151"><a href="#cb96-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-152"><a href="#cb96-152" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>One variable:</span>
<span id="cb96-153"><a href="#cb96-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-154"><a href="#cb96-154" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Discrete:</span>
<span id="cb96-155"><a href="#cb96-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-156"><a href="#cb96-156" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_bar()`</span>: display distribution of discrete variable.</span>
<span id="cb96-157"><a href="#cb96-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-158"><a href="#cb96-158" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Continuous:</span>
<span id="cb96-159"><a href="#cb96-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-160"><a href="#cb96-160" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_histogram()`</span>: bin and count continuous variable, display with bars.</span>
<span id="cb96-161"><a href="#cb96-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-162"><a href="#cb96-162" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_density()`</span>: smoothed density estimate.</span>
<span id="cb96-163"><a href="#cb96-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-164"><a href="#cb96-164" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_dotplot()`</span>: stack individual points into a dot plot.</span>
<span id="cb96-165"><a href="#cb96-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-166"><a href="#cb96-166" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_freqpoly()`</span>: bin and count continuous variable, display with lines.</span>
<span id="cb96-167"><a href="#cb96-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-168"><a href="#cb96-168" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Two variables:</span>
<span id="cb96-169"><a href="#cb96-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-170"><a href="#cb96-170" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Both continuous:</span>
<span id="cb96-171"><a href="#cb96-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-172"><a href="#cb96-172" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_point()`</span>: scatterplot.</span>
<span id="cb96-173"><a href="#cb96-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-174"><a href="#cb96-174" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_quantile()`</span>: smoothed quantile regression.</span>
<span id="cb96-175"><a href="#cb96-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-176"><a href="#cb96-176" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_rug()`</span>: marginal rug plots.</span>
<span id="cb96-177"><a href="#cb96-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-178"><a href="#cb96-178" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_smooth()`</span>: smoothed line of best fit.</span>
<span id="cb96-179"><a href="#cb96-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-180"><a href="#cb96-180" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_text()`</span>: text labels.</span>
<span id="cb96-181"><a href="#cb96-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-182"><a href="#cb96-182" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Show distribution:</span>
<span id="cb96-183"><a href="#cb96-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-184"><a href="#cb96-184" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_bin2d()`</span>: bin into rectangles and count.</span>
<span id="cb96-185"><a href="#cb96-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-186"><a href="#cb96-186" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_density2d()`</span>: smoothed 2d density estimate.</span>
<span id="cb96-187"><a href="#cb96-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-188"><a href="#cb96-188" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_hex()`</span>: bin into hexagons and count.</span>
<span id="cb96-189"><a href="#cb96-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-190"><a href="#cb96-190" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>At least one discrete:</span>
<span id="cb96-191"><a href="#cb96-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-192"><a href="#cb96-192" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_count()`</span>: count number of point at distinct locations</span>
<span id="cb96-193"><a href="#cb96-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-194"><a href="#cb96-194" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_jitter()`</span>: randomly jitter overlapping points.</span>
<span id="cb96-195"><a href="#cb96-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-196"><a href="#cb96-196" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>One continuous, one discrete:</span>
<span id="cb96-197"><a href="#cb96-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-198"><a href="#cb96-198" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_bar(stat = "identity")`</span>: a bar chart of precomputed summaries.</span>
<span id="cb96-199"><a href="#cb96-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-200"><a href="#cb96-200" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_boxplot()`</span>: boxplots.</span>
<span id="cb96-201"><a href="#cb96-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-202"><a href="#cb96-202" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_violin()`</span>: show density of values in each group.</span>
<span id="cb96-203"><a href="#cb96-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-204"><a href="#cb96-204" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>One time, one continuous:</span>
<span id="cb96-205"><a href="#cb96-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-206"><a href="#cb96-206" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_area()`</span>: area plot.</span>
<span id="cb96-207"><a href="#cb96-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-208"><a href="#cb96-208" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_line()`</span>: line plot.</span>
<span id="cb96-209"><a href="#cb96-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-210"><a href="#cb96-210" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_step()`</span>: step plot.</span>
<span id="cb96-211"><a href="#cb96-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-212"><a href="#cb96-212" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Display uncertainty:</span>
<span id="cb96-213"><a href="#cb96-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-214"><a href="#cb96-214" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_crossbar()`</span>: vertical bar with center.</span>
<span id="cb96-215"><a href="#cb96-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-216"><a href="#cb96-216" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_errorbar()`</span>: error bars.</span>
<span id="cb96-217"><a href="#cb96-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-218"><a href="#cb96-218" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_linerange()`</span>: vertical line.</span>
<span id="cb96-219"><a href="#cb96-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-220"><a href="#cb96-220" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_pointrange()`</span>: vertical line with center.</span>
<span id="cb96-221"><a href="#cb96-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-222"><a href="#cb96-222" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Spatial:</span>
<span id="cb96-223"><a href="#cb96-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-224"><a href="#cb96-224" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span><span class="in">`geom_map()`</span>: fast version of for map data.</span>
<span id="cb96-225"><a href="#cb96-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-226"><a href="#cb96-226" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Three variables:</span>
<span id="cb96-227"><a href="#cb96-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-228"><a href="#cb96-228" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_contour()`</span>: contours.</span>
<span id="cb96-229"><a href="#cb96-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-230"><a href="#cb96-230" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_tile()`</span>: tile the plane with rectangles.</span>
<span id="cb96-231"><a href="#cb96-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-232"><a href="#cb96-232" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span><span class="in">`geom_raster()`</span>: fast version of for equal sized tiles.</span>
<span id="cb96-233"><a href="#cb96-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-234"><a href="#cb96-234" aria-hidden="true" tabindex="-1"></a><span class="fu">### X=连续型变量</span></span>
<span id="cb96-235"><a href="#cb96-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-236"><a href="#cb96-236" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_point</span></span>
<span id="cb96-237"><a href="#cb96-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-240"><a href="#cb96-240" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-241"><a href="#cb96-241" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb96-242"><a href="#cb96-242" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>displ,<span class="at">y=</span>hwy),</span>
<span id="cb96-243"><a href="#cb96-243" aria-hidden="true" tabindex="-1"></a>               <span class="at">stat =</span> <span class="st">"identity"</span>,<span class="at">position =</span> <span class="st">"identity"</span>)</span>
<span id="cb96-244"><a href="#cb96-244" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-245"><a href="#cb96-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-248"><a href="#cb96-248" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-249"><a href="#cb96-249" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ,hwy)) <span class="sc">+</span></span>
<span id="cb96-250"><a href="#cb96-250" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">|</span></span>
<span id="cb96-251"><a href="#cb96-251" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb96-252"><a href="#cb96-252" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ,hwy)) <span class="sc">+</span></span>
<span id="cb96-253"><a href="#cb96-253" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> displ<span class="sc">/</span><span class="dv">10</span>)) <span class="sc">+</span> </span>
<span id="cb96-254"><a href="#cb96-254" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_size_area</span>(<span class="at">name=</span><span class="st">"displ/10"</span>)</span>
<span id="cb96-255"><a href="#cb96-255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-256"><a href="#cb96-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-257"><a href="#cb96-257" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_line</span></span>
<span id="cb96-258"><a href="#cb96-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-261"><a href="#cb96-261" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-262"><a href="#cb96-262" aria-hidden="true" tabindex="-1"></a>economics <span class="sc">|&gt;</span> <span class="fu">head</span>()</span>
<span id="cb96-263"><a href="#cb96-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-264"><a href="#cb96-264" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(economics,<span class="fu">aes</span>(date,pop))<span class="sc">+</span></span>
<span id="cb96-265"><a href="#cb96-265" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb96-266"><a href="#cb96-266" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_date</span>()</span>
<span id="cb96-267"><a href="#cb96-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-268"><a href="#cb96-268" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-269"><a href="#cb96-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-270"><a href="#cb96-270" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_smooth</span></span>
<span id="cb96-271"><a href="#cb96-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-274"><a href="#cb96-274" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-275"><a href="#cb96-275" aria-hidden="true" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb96-276"><a href="#cb96-276" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span>
<span id="cb96-277"><a href="#cb96-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-278"><a href="#cb96-278" aria-hidden="true" tabindex="-1"></a>q<span class="sc">+</span><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>,<span class="at">span =</span> <span class="fl">0.2</span>,<span class="at">se=</span>T) <span class="co"># loess 平滑局部回归   small n</span></span>
<span id="cb96-279"><a href="#cb96-279" aria-hidden="true" tabindex="-1"></a>                                   <span class="co">#span 0非常摆动，1不那么摆动</span></span>
<span id="cb96-280"><a href="#cb96-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-281"><a href="#cb96-281" aria-hidden="true" tabindex="-1"></a>q<span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">span =</span> <span class="dv">1</span>)  <span class="co">#不很摆动</span></span>
<span id="cb96-282"><a href="#cb96-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-283"><a href="#cb96-283" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb96-284"><a href="#cb96-284" aria-hidden="true" tabindex="-1"></a>q<span class="sc">+</span><span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"rlm"</span>)   <span class="co"># robust linear model  稳健线性模型</span></span>
<span id="cb96-285"><a href="#cb96-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-286"><a href="#cb96-286" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mgcv)</span>
<span id="cb96-287"><a href="#cb96-287" aria-hidden="true" tabindex="-1"></a>q<span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"gam"</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">s</span>(x)) <span class="co"># gam 广义相加模型   n&gt;1000</span></span>
<span id="cb96-288"><a href="#cb96-288" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-289"><a href="#cb96-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-292"><a href="#cb96-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-293"><a href="#cb96-293" aria-hidden="true" tabindex="-1"></a>binomial_smooth <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="cb96-294"><a href="#cb96-294" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"glm"</span>, <span class="at">method.args =</span> <span class="fu">list</span>(<span class="at">family =</span> <span class="st">"binomial"</span>), ...)</span>
<span id="cb96-295"><a href="#cb96-295" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb96-296"><a href="#cb96-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-297"><a href="#cb96-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-298"><a href="#cb96-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-299"><a href="#cb96-299" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rpart<span class="sc">::</span>kyphosis,<span class="fu">aes</span>(Age,<span class="fu">as.numeric</span>(Kyphosis)<span class="sc">-</span><span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb96-300"><a href="#cb96-300" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb96-301"><a href="#cb96-301" aria-hidden="true" tabindex="-1"></a>    <span class="fu">binomial_smooth</span>()</span>
<span id="cb96-302"><a href="#cb96-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-303"><a href="#cb96-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-304"><a href="#cb96-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-305"><a href="#cb96-305" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-306"><a href="#cb96-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-307"><a href="#cb96-307" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_histogram</span></span>
<span id="cb96-308"><a href="#cb96-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-311"><a href="#cb96-311" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-312"><a href="#cb96-312" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(hwy)) <span class="sc">+</span> <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">2.5</span>)</span>
<span id="cb96-313"><a href="#cb96-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-314"><a href="#cb96-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-315"><a href="#cb96-315" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(hwy)) <span class="sc">+</span></span>
<span id="cb96-316"><a href="#cb96-316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">|</span></span>
<span id="cb96-317"><a href="#cb96-317" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(hwy)) <span class="sc">+</span></span>
<span id="cb96-318"><a href="#cb96-318" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">weight =</span> displ), <span class="at">binwidth =</span> <span class="dv">1</span>) <span class="co"># 加权</span></span>
<span id="cb96-319"><a href="#cb96-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-320"><a href="#cb96-320" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb96-321"><a href="#cb96-321" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>displ,<span class="at">y=</span><span class="fu">after_stat</span>(density)),</span>
<span id="cb96-322"><a href="#cb96-322" aria-hidden="true" tabindex="-1"></a>                   <span class="at">stat =</span> <span class="st">"bin"</span>,<span class="at">position =</span> <span class="st">"stack"</span>,</span>
<span id="cb96-323"><a href="#cb96-323" aria-hidden="true" tabindex="-1"></a>                   <span class="at">binwidth =</span> <span class="fl">0.5</span></span>
<span id="cb96-324"><a href="#cb96-324" aria-hidden="true" tabindex="-1"></a>                   ) <span class="sc">+</span></span>
<span id="cb96-325"><a href="#cb96-325" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels=</span>scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb96-326"><a href="#cb96-326" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">x=</span>displ,<span class="at">y=</span><span class="fu">after_stat</span>(density)),</span>
<span id="cb96-327"><a href="#cb96-327" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color=</span><span class="st">"red"</span>, <span class="at">linewidth=</span><span class="dv">1</span>)</span>
<span id="cb96-328"><a href="#cb96-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-329"><a href="#cb96-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-330"><a href="#cb96-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-331"><a href="#cb96-331" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-332"><a href="#cb96-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-333"><a href="#cb96-333" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_bin2d()</span></span>
<span id="cb96-334"><a href="#cb96-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-337"><a href="#cb96-337" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-338"><a href="#cb96-338" aria-hidden="true" tabindex="-1"></a>smaller <span class="ot">&lt;-</span> diamonds <span class="sc">|&gt;</span> </span>
<span id="cb96-339"><a href="#cb96-339" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(carat <span class="sc">&lt;</span> <span class="dv">3</span>)</span>
<span id="cb96-340"><a href="#cb96-340" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smaller, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb96-341"><a href="#cb96-341" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>()</span>
<span id="cb96-342"><a href="#cb96-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-343"><a href="#cb96-343" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("hexbin")</span></span>
<span id="cb96-344"><a href="#cb96-344" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(smaller, <span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb96-345"><a href="#cb96-345" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>()</span>
<span id="cb96-346"><a href="#cb96-346" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-347"><a href="#cb96-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-348"><a href="#cb96-348" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_freqpoly</span></span>
<span id="cb96-349"><a href="#cb96-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-352"><a href="#cb96-352" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-353"><a href="#cb96-353" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(hwy)) <span class="sc">+</span> </span>
<span id="cb96-354"><a href="#cb96-354" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="fl">2.5</span>)</span>
<span id="cb96-355"><a href="#cb96-355" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-356"><a href="#cb96-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-357"><a href="#cb96-357" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_density</span></span>
<span id="cb96-358"><a href="#cb96-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-361"><a href="#cb96-361" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-362"><a href="#cb96-362" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> mpg)</span>
<span id="cb96-363"><a href="#cb96-363" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_density</span>(<span class="fu">aes</span>(displ,<span class="at">fill=</span>drv),</span>
<span id="cb96-364"><a href="#cb96-364" aria-hidden="true" tabindex="-1"></a>                 <span class="at">stat =</span> <span class="st">"density"</span>,<span class="at">position =</span> <span class="st">"identity"</span>,</span>
<span id="cb96-365"><a href="#cb96-365" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha=</span><span class="fl">0.3</span></span>
<span id="cb96-366"><a href="#cb96-366" aria-hidden="true" tabindex="-1"></a>                 )<span class="sc">+</span></span>
<span id="cb96-367"><a href="#cb96-367" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)<span class="sc">+</span></span>
<span id="cb96-368"><a href="#cb96-368" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">fill=</span><span class="st">"图例名"</span>)<span class="sc">+</span></span>
<span id="cb96-369"><a href="#cb96-369" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span>
<span id="cb96-370"><a href="#cb96-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-371"><a href="#cb96-371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-372"><a href="#cb96-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-373"><a href="#cb96-373" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_rug</span></span>
<span id="cb96-374"><a href="#cb96-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-375"><a href="#cb96-375" aria-hidden="true" tabindex="-1"></a>y→<span class="in">`sides="r","l"`</span></span>
<span id="cb96-376"><a href="#cb96-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-377"><a href="#cb96-377" aria-hidden="true" tabindex="-1"></a>x→<span class="in">`sides="b","t"`</span></span>
<span id="cb96-378"><a href="#cb96-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-381"><a href="#cb96-381" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-382"><a href="#cb96-382" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_rug</span>(<span class="fu">aes</span>(<span class="at">x=</span>displ,<span class="at">y=</span>hwy),</span>
<span id="cb96-383"><a href="#cb96-383" aria-hidden="true" tabindex="-1"></a>           <span class="at">sides =</span> <span class="st">"br"</span>,<span class="at">color=</span><span class="st">"brown"</span>)</span>
<span id="cb96-384"><a href="#cb96-384" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-385"><a href="#cb96-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-386"><a href="#cb96-386" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_jitter</span></span>
<span id="cb96-387"><a href="#cb96-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-390"><a href="#cb96-390" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-391"><a href="#cb96-391" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">geom_jitter</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>displ,<span class="at">y=</span>hwy),</span>
<span id="cb96-392"><a href="#cb96-392" aria-hidden="true" tabindex="-1"></a>               <span class="at">stat =</span> <span class="st">"identity"</span>,<span class="at">position =</span> <span class="st">"jitter"</span>)</span>
<span id="cb96-393"><a href="#cb96-393" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-394"><a href="#cb96-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-395"><a href="#cb96-395" aria-hidden="true" tabindex="-1"></a><span class="fu">### X=离散型变量</span></span>
<span id="cb96-396"><a href="#cb96-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-397"><a href="#cb96-397" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_bar</span></span>
<span id="cb96-398"><a href="#cb96-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-401"><a href="#cb96-401" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-402"><a href="#cb96-402" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb96-403"><a href="#cb96-403" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">factor</span>(cyl),<span class="at">fill=</span>drv),</span>
<span id="cb96-404"><a href="#cb96-404" aria-hidden="true" tabindex="-1"></a>             <span class="at">stat =</span> <span class="st">"count"</span>,<span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">|</span></span>
<span id="cb96-405"><a href="#cb96-405" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb96-406"><a href="#cb96-406" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">factor</span>(cyl),<span class="at">fill=</span>drv),</span>
<span id="cb96-407"><a href="#cb96-407" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="st">"dodge"</span>)</span>
<span id="cb96-408"><a href="#cb96-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-409"><a href="#cb96-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-410"><a href="#cb96-410" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb96-411"><a href="#cb96-411" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">factor</span>(cyl),<span class="at">y=</span>hwy,<span class="at">fill=</span>drv),</span>
<span id="cb96-412"><a href="#cb96-412" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">|</span></span>
<span id="cb96-413"><a href="#cb96-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-414"><a href="#cb96-414" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb96-415"><a href="#cb96-415" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">factor</span>(cyl),<span class="at">y=</span>hwy,<span class="at">fill=</span>drv),</span>
<span id="cb96-416"><a href="#cb96-416" aria-hidden="true" tabindex="-1"></a>             <span class="at">position =</span> <span class="st">"fill"</span>)<span class="sc">+</span></span>
<span id="cb96-417"><a href="#cb96-417" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_percent</span>())</span>
<span id="cb96-418"><a href="#cb96-418" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-419"><a href="#cb96-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-420"><a href="#cb96-420" aria-hidden="true" tabindex="-1"></a>有序条形图</span>
<span id="cb96-421"><a href="#cb96-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-424"><a href="#cb96-424" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-425"><a href="#cb96-425" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_infreq</span>(class))) <span class="sc">+</span>  <span class="co">#降序条形图</span></span>
<span id="cb96-426"><a href="#cb96-426" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb96-427"><a href="#cb96-427" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-428"><a href="#cb96-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-429"><a href="#cb96-429" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_errorbar</span></span>
<span id="cb96-430"><a href="#cb96-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-431"><a href="#cb96-431" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>geom_errorbarh</span>
<span id="cb96-432"><a href="#cb96-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-433"><a href="#cb96-433" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>geom_linerange</span>
<span id="cb96-434"><a href="#cb96-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-435"><a href="#cb96-435" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>geom_crossbar</span>
<span id="cb96-436"><a href="#cb96-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-437"><a href="#cb96-437" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>geom_pointrange</span>
<span id="cb96-438"><a href="#cb96-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-441"><a href="#cb96-441" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-442"><a href="#cb96-442" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">18</span>, <span class="dv">11</span>, <span class="dv">16</span>)</span>
<span id="cb96-443"><a href="#cb96-443" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> y, <span class="at">se =</span> <span class="fu">c</span>(<span class="fl">1.2</span>, <span class="fl">0.5</span>, <span class="fl">1.0</span>))</span>
<span id="cb96-444"><a href="#cb96-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-445"><a href="#cb96-445" aria-hidden="true" tabindex="-1"></a>base <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(x, y, <span class="at">ymin =</span> y <span class="sc">-</span> se, <span class="at">ymax =</span> y <span class="sc">+</span> se))</span>
<span id="cb96-446"><a href="#cb96-446" aria-hidden="true" tabindex="-1"></a>(base <span class="sc">+</span> <span class="fu">geom_errorbar</span>()<span class="sc">|</span></span>
<span id="cb96-447"><a href="#cb96-447" aria-hidden="true" tabindex="-1"></a>base <span class="sc">+</span> <span class="fu">geom_linerange</span>()<span class="sc">|</span></span>
<span id="cb96-448"><a href="#cb96-448" aria-hidden="true" tabindex="-1"></a>base <span class="sc">+</span> <span class="fu">geom_ribbon</span>())<span class="sc">/</span></span>
<span id="cb96-449"><a href="#cb96-449" aria-hidden="true" tabindex="-1"></a>(base <span class="sc">+</span> <span class="fu">geom_crossbar</span>()<span class="sc">|</span></span>
<span id="cb96-450"><a href="#cb96-450" aria-hidden="true" tabindex="-1"></a>base <span class="sc">+</span> <span class="fu">geom_pointrange</span>()<span class="sc">|</span></span>
<span id="cb96-451"><a href="#cb96-451" aria-hidden="true" tabindex="-1"></a>base <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">stat =</span> <span class="st">"identity"</span>))</span>
<span id="cb96-452"><a href="#cb96-452" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-453"><a href="#cb96-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-456"><a href="#cb96-456" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-457"><a href="#cb96-457" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">"data/g.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb96-458"><a href="#cb96-458" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb96-459"><a href="#cb96-459" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean=</span><span class="fu">mean</span>(liverweight),</span>
<span id="cb96-460"><a href="#cb96-460" aria-hidden="true" tabindex="-1"></a>        <span class="at">sd=</span><span class="fu">sd</span>(liverweight),</span>
<span id="cb96-461"><a href="#cb96-461" aria-hidden="true" tabindex="-1"></a>        <span class="at">.by=</span>treatment</span>
<span id="cb96-462"><a href="#cb96-462" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb96-463"><a href="#cb96-463" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(treatment,mean,<span class="at">fill=</span>treatment))<span class="sc">+</span></span>
<span id="cb96-464"><a href="#cb96-464" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>)<span class="sc">+</span></span>
<span id="cb96-465"><a href="#cb96-465" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>mean<span class="sc">-</span>sd,<span class="at">ymax=</span>mean<span class="sc">+</span>sd),<span class="at">width=</span>.<span class="dv">2</span>)</span>
<span id="cb96-466"><a href="#cb96-466" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-467"><a href="#cb96-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-468"><a href="#cb96-468" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_dotplot</span></span>
<span id="cb96-469"><a href="#cb96-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-472"><a href="#cb96-472" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-473"><a href="#cb96-473" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg)<span class="sc">+</span><span class="fu">geom_dotplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>drv,<span class="at">y=</span>hwy),</span>
<span id="cb96-474"><a href="#cb96-474" aria-hidden="true" tabindex="-1"></a>                 <span class="at">position =</span> <span class="st">"identity"</span>,</span>
<span id="cb96-475"><a href="#cb96-475" aria-hidden="true" tabindex="-1"></a>                 <span class="at">stackdir =</span> <span class="st">"center"</span>,<span class="at">binaxis =</span> <span class="st">'y'</span>,<span class="co"># stacking along y axis</span></span>
<span id="cb96-476"><a href="#cb96-476" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fill=</span><span class="st">"red"</span>,<span class="at">binwidth =</span> <span class="fl">0.7</span>)</span>
<span id="cb96-477"><a href="#cb96-477" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-478"><a href="#cb96-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-479"><a href="#cb96-479" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_boxplot</span></span>
<span id="cb96-480"><a href="#cb96-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-483"><a href="#cb96-483" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-484"><a href="#cb96-484" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg) <span class="sc">+</span> <span class="fu">geom_boxplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>drv,<span class="at">y=</span>hwy),</span>
<span id="cb96-485"><a href="#cb96-485" aria-hidden="true" tabindex="-1"></a>             <span class="at">stat =</span> <span class="st">"boxplot"</span>,<span class="at">position =</span> <span class="st">"dodge"</span>,</span>
<span id="cb96-486"><a href="#cb96-486" aria-hidden="true" tabindex="-1"></a>             <span class="at">notch=</span><span class="cn">TRUE</span>, <span class="at">varwidth=</span><span class="cn">TRUE</span>,</span>
<span id="cb96-487"><a href="#cb96-487" aria-hidden="true" tabindex="-1"></a>             <span class="at">width=</span><span class="fl">0.1</span>,<span class="at">fill=</span><span class="st">"green"</span></span>
<span id="cb96-488"><a href="#cb96-488" aria-hidden="true" tabindex="-1"></a>            )<span class="sc">+</span></span>
<span id="cb96-489"><a href="#cb96-489" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x=</span>drv,<span class="at">y=</span>hwy),<span class="at">alpha=</span><span class="fl">0.2</span>)</span>
<span id="cb96-490"><a href="#cb96-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-491"><a href="#cb96-491" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-492"><a href="#cb96-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-493"><a href="#cb96-493" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_violin</span></span>
<span id="cb96-494"><a href="#cb96-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-497"><a href="#cb96-497" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-498"><a href="#cb96-498" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg) <span class="sc">+</span> <span class="fu">geom_violin</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>drv,<span class="at">y=</span>hwy),</span>
<span id="cb96-499"><a href="#cb96-499" aria-hidden="true" tabindex="-1"></a>             <span class="at">stat =</span> <span class="st">"ydensity"</span>,<span class="at">position =</span> <span class="st">"dodge"</span>)</span>
<span id="cb96-500"><a href="#cb96-500" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-501"><a href="#cb96-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-502"><a href="#cb96-502" aria-hidden="true" tabindex="-1"></a><span class="fu">#### geom_tile</span></span>
<span id="cb96-503"><a href="#cb96-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-506"><a href="#cb96-506" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-507"><a href="#cb96-507" aria-hidden="true" tabindex="-1"></a><span class="co"># 设置随机数种子以确保结果的可重复性  </span></span>
<span id="cb96-508"><a href="#cb96-508" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">10</span>)  </span>
<span id="cb96-509"><a href="#cb96-509" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb96-510"><a href="#cb96-510" aria-hidden="true" tabindex="-1"></a><span class="co"># 生成随机数据集  </span></span>
<span id="cb96-511"><a href="#cb96-511" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">tibble</span>(  </span>
<span id="cb96-512"><a href="#cb96-512" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2000</span><span class="sc">:</span><span class="dv">2024</span>,  </span>
<span id="cb96-513"><a href="#cb96-513" aria-hidden="true" tabindex="-1"></a>  <span class="at">lung =</span> <span class="fu">runif</span>(<span class="dv">25</span>),  </span>
<span id="cb96-514"><a href="#cb96-514" aria-hidden="true" tabindex="-1"></a>  <span class="at">liver =</span> <span class="fu">runif</span>(<span class="dv">25</span>), </span>
<span id="cb96-515"><a href="#cb96-515" aria-hidden="true" tabindex="-1"></a>  <span class="at">bone =</span> <span class="fu">runif</span>(<span class="dv">25</span>),  </span>
<span id="cb96-516"><a href="#cb96-516" aria-hidden="true" tabindex="-1"></a>  <span class="at">luk =</span> <span class="fu">runif</span>(<span class="dv">25</span>),  </span>
<span id="cb96-517"><a href="#cb96-517" aria-hidden="true" tabindex="-1"></a>  <span class="at">eso =</span> <span class="fu">runif</span>(<span class="dv">25</span>),  </span>
<span id="cb96-518"><a href="#cb96-518" aria-hidden="true" tabindex="-1"></a>  <span class="at">gas =</span> <span class="fu">runif</span>(<span class="dv">25</span>),   </span>
<span id="cb96-519"><a href="#cb96-519" aria-hidden="true" tabindex="-1"></a>  <span class="at">eye =</span> <span class="fu">runif</span>(<span class="dv">25</span>),  </span>
<span id="cb96-520"><a href="#cb96-520" aria-hidden="true" tabindex="-1"></a>  <span class="at">brain =</span> <span class="fu">runif</span>(<span class="dv">25</span>),  </span>
<span id="cb96-521"><a href="#cb96-521" aria-hidden="true" tabindex="-1"></a>  <span class="at">pan =</span> <span class="fu">runif</span>(<span class="dv">25</span>),  </span>
<span id="cb96-522"><a href="#cb96-522" aria-hidden="true" tabindex="-1"></a>  <span class="at">kidney =</span> <span class="fu">runif</span>(<span class="dv">25</span>),  </span>
<span id="cb96-523"><a href="#cb96-523" aria-hidden="true" tabindex="-1"></a>  <span class="at">breast=</span> <span class="fu">runif</span>(<span class="dv">25</span>),  </span>
<span id="cb96-524"><a href="#cb96-524" aria-hidden="true" tabindex="-1"></a>)  <span class="sc">|&gt;</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="dv">1</span>,</span>
<span id="cb96-525"><a href="#cb96-525" aria-hidden="true" tabindex="-1"></a>                   <span class="at">names_to =</span> <span class="st">"cancer"</span>,</span>
<span id="cb96-526"><a href="#cb96-526" aria-hidden="true" tabindex="-1"></a>                   <span class="at">values_to =</span> <span class="st">"morbidity"</span>)</span>
<span id="cb96-527"><a href="#cb96-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-528"><a href="#cb96-528" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mydata, <span class="fu">aes</span>(year, cancer)) <span class="sc">+</span>  </span>
<span id="cb96-529"><a href="#cb96-529" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_tile</span>(<span class="fu">aes</span>(<span class="at">fill =</span>morbidity)) <span class="sc">+</span>  </span>
<span id="cb96-530"><a href="#cb96-530" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"red"</span>)</span>
<span id="cb96-531"><a href="#cb96-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-532"><a href="#cb96-532" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-533"><a href="#cb96-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-534"><a href="#cb96-534" aria-hidden="true" tabindex="-1"></a><span class="fu">## 统计变换 statistical transformations</span></span>
<span id="cb96-535"><a href="#cb96-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-536"><a href="#cb96-536" aria-hidden="true" tabindex="-1"></a>stat_bin()：geom_bar()，geom_freqpoly()，geom_histogram()</span>
<span id="cb96-537"><a href="#cb96-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-540"><a href="#cb96-540" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-541"><a href="#cb96-541" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb96-542"><a href="#cb96-542" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span>cyl , <span class="at">y=</span> mpg))<span class="sc">+</span></span>
<span id="cb96-543"><a href="#cb96-543" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_summary</span>(<span class="at">geom =</span> <span class="st">"bar"</span>,<span class="at">fun =</span> mean)</span>
<span id="cb96-544"><a href="#cb96-544" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-545"><a href="#cb96-545" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-546"><a href="#cb96-546" aria-hidden="true" tabindex="-1"></a>stat_bin2d()：geom_bin2d()</span>
<span id="cb96-547"><a href="#cb96-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-548"><a href="#cb96-548" aria-hidden="true" tabindex="-1"></a>stat_bindot()：geom_dotplot()</span>
<span id="cb96-549"><a href="#cb96-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-550"><a href="#cb96-550" aria-hidden="true" tabindex="-1"></a>stat_binhex()：geom_hex()</span>
<span id="cb96-551"><a href="#cb96-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-552"><a href="#cb96-552" aria-hidden="true" tabindex="-1"></a>stat_boxplot()：geom_boxplot()</span>
<span id="cb96-553"><a href="#cb96-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-554"><a href="#cb96-554" aria-hidden="true" tabindex="-1"></a>stat_contour()：geom_contour()</span>
<span id="cb96-555"><a href="#cb96-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-556"><a href="#cb96-556" aria-hidden="true" tabindex="-1"></a>stat_quantile()：geom_quantile()</span>
<span id="cb96-557"><a href="#cb96-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-558"><a href="#cb96-558" aria-hidden="true" tabindex="-1"></a>stat_smooth()：geom_smooth()</span>
<span id="cb96-559"><a href="#cb96-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-560"><a href="#cb96-560" aria-hidden="true" tabindex="-1"></a>stat_sum()：geom_count()</span>
<span id="cb96-561"><a href="#cb96-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-562"><a href="#cb96-562" aria-hidden="true" tabindex="-1"></a>stat_ecdf()：计算经验累积分布图。</span>
<span id="cb96-563"><a href="#cb96-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-564"><a href="#cb96-564" aria-hidden="true" tabindex="-1"></a>stat_function()：根据 x 值的函数计算 y 值。</span>
<span id="cb96-565"><a href="#cb96-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-566"><a href="#cb96-566" aria-hidden="true" tabindex="-1"></a>stat_summary()：将 Y 值汇总到不同的 X 值。</span>
<span id="cb96-567"><a href="#cb96-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-568"><a href="#cb96-568" aria-hidden="true" tabindex="-1"></a>stat_summary2d() ：汇总分箱值。</span>
<span id="cb96-569"><a href="#cb96-569" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-570"><a href="#cb96-570" aria-hidden="true" tabindex="-1"></a>stat_summary_hex()</span>
<span id="cb96-571"><a href="#cb96-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-572"><a href="#cb96-572" aria-hidden="true" tabindex="-1"></a>stat_qq()：对分位数-分位数图执行计算。</span>
<span id="cb96-573"><a href="#cb96-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-574"><a href="#cb96-574" aria-hidden="true" tabindex="-1"></a>stat_spoke()：将角度和半径转换为位置。</span>
<span id="cb96-575"><a href="#cb96-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-576"><a href="#cb96-576" aria-hidden="true" tabindex="-1"></a>stat_unique()：删除重复的行。</span>
<span id="cb96-577"><a href="#cb96-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-580"><a href="#cb96-580" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-581"><a href="#cb96-581" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diamonds) <span class="sc">+</span> </span>
<span id="cb96-582"><a href="#cb96-582" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb96-583"><a href="#cb96-583" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">y =</span> depth),</span>
<span id="cb96-584"><a href="#cb96-584" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"errorbar"</span>,</span>
<span id="cb96-585"><a href="#cb96-585" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.min =</span> min,</span>
<span id="cb96-586"><a href="#cb96-586" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.max =</span> max,</span>
<span id="cb96-587"><a href="#cb96-587" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> mean</span>
<span id="cb96-588"><a href="#cb96-588" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-589"><a href="#cb96-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-590"><a href="#cb96-590" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(trans, cty)) <span class="sc">+</span> </span>
<span id="cb96-591"><a href="#cb96-591" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb96-592"><a href="#cb96-592" aria-hidden="true" tabindex="-1"></a>    <span class="fu">stat_summary</span>(<span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">fun =</span> <span class="st">"mean"</span>, <span class="at">colour =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">4</span>)</span>
<span id="cb96-593"><a href="#cb96-593" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-594"><a href="#cb96-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-595"><a href="#cb96-595" aria-hidden="true" tabindex="-1"></a><span class="fu">## 位置调整 position adjustments</span></span>
<span id="cb96-596"><a href="#cb96-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-597"><a href="#cb96-597" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 条偏移</span></span>
<span id="cb96-598"><a href="#cb96-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-601"><a href="#cb96-601" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-602"><a href="#cb96-602" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> drv, <span class="at">fill =</span> class)) <span class="sc">+</span> </span>
<span id="cb96-603"><a href="#cb96-603" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">5</span>, <span class="at">position =</span> <span class="st">"identity"</span>)<span class="sc">|</span></span>
<span id="cb96-604"><a href="#cb96-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-605"><a href="#cb96-605" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> drv, <span class="at">color =</span> class)) <span class="sc">+</span> </span>
<span id="cb96-606"><a href="#cb96-606" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">position =</span> <span class="st">"identity"</span>)</span>
<span id="cb96-607"><a href="#cb96-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-608"><a href="#cb96-608" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> drv, <span class="at">fill =</span> class)) <span class="sc">+</span> </span>
<span id="cb96-609"><a href="#cb96-609" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>)<span class="sc">|</span></span>
<span id="cb96-610"><a href="#cb96-610" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-611"><a href="#cb96-611" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> drv, <span class="at">fill =</span> class)) <span class="sc">+</span> </span>
<span id="cb96-612"><a href="#cb96-612" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"dodge"</span>)</span>
<span id="cb96-613"><a href="#cb96-613" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-614"><a href="#cb96-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-615"><a href="#cb96-615" aria-hidden="true" tabindex="-1"></a><span class="fu">#### 点偏移</span></span>
<span id="cb96-616"><a href="#cb96-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-617"><a href="#cb96-617" aria-hidden="true" tabindex="-1"></a>position_nudge()：按固定偏移量移动点。</span>
<span id="cb96-618"><a href="#cb96-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-619"><a href="#cb96-619" aria-hidden="true" tabindex="-1"></a>position_jitter()：为每个位置添加一点随机噪音。</span>
<span id="cb96-620"><a href="#cb96-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-621"><a href="#cb96-621" aria-hidden="true" tabindex="-1"></a>position_jitterdodge()：躲避组内的点，然后添加一点随机噪音。</span>
<span id="cb96-622"><a href="#cb96-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-625"><a href="#cb96-625" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-626"><a href="#cb96-626" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(cyl), <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb96-627"><a href="#cb96-627" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"identity"</span>) <span class="sc">|</span></span>
<span id="cb96-628"><a href="#cb96-628" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(cyl), <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb96-629"><a href="#cb96-629" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="st">"jitter"</span>)</span>
<span id="cb96-630"><a href="#cb96-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-631"><a href="#cb96-631" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(cyl), <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb96-632"><a href="#cb96-632" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span><span class="fu">position_nudge</span>(<span class="at">x=</span><span class="fl">0.1</span>,<span class="at">y=</span><span class="dv">0</span>))<span class="sc">|</span></span>
<span id="cb96-633"><a href="#cb96-633" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(cyl), <span class="at">y =</span> hwy,<span class="at">color=</span><span class="fu">factor</span>(cyl))) <span class="sc">+</span> </span>
<span id="cb96-634"><a href="#cb96-634" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">position =</span> <span class="fu">position_jitterdodge</span>())</span>
<span id="cb96-635"><a href="#cb96-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-636"><a href="#cb96-636" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-637"><a href="#cb96-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-638"><a href="#cb96-638" aria-hidden="true" tabindex="-1"></a><span class="fu">## 坐标系 coordinate</span></span>
<span id="cb96-639"><a href="#cb96-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-640"><a href="#cb96-640" aria-hidden="true" tabindex="-1"></a>默认坐标系是笛卡尔坐标系</span>
<span id="cb96-641"><a href="#cb96-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-644"><a href="#cb96-644" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-645"><a href="#cb96-645" aria-hidden="true" tabindex="-1"></a>bar <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> diamonds) <span class="sc">+</span> </span>
<span id="cb96-646"><a href="#cb96-646" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(</span>
<span id="cb96-647"><a href="#cb96-647" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> clarity, <span class="at">fill =</span> clarity), </span>
<span id="cb96-648"><a href="#cb96-648" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb96-649"><a href="#cb96-649" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">1</span></span>
<span id="cb96-650"><a href="#cb96-650" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb96-651"><a href="#cb96-651" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>)</span>
<span id="cb96-652"><a href="#cb96-652" aria-hidden="true" tabindex="-1"></a>bar</span>
<span id="cb96-653"><a href="#cb96-653" aria-hidden="true" tabindex="-1"></a>bar <span class="sc">+</span> <span class="fu">coord_cartesian</span>() <span class="sc">|</span><span class="co">#笛卡尔坐标</span></span>
<span id="cb96-654"><a href="#cb96-654" aria-hidden="true" tabindex="-1"></a>bar <span class="sc">+</span> <span class="fu">coord_flip</span>()<span class="sc">|</span> <span class="co">#水平条形图</span></span>
<span id="cb96-655"><a href="#cb96-655" aria-hidden="true" tabindex="-1"></a>bar <span class="sc">+</span> <span class="fu">coord_polar</span>()<span class="co">#极坐标</span></span>
<span id="cb96-656"><a href="#cb96-656" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-657"><a href="#cb96-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-658"><a href="#cb96-658" aria-hidden="true" tabindex="-1"></a><span class="fu">## 坐标轴 axis</span></span>
<span id="cb96-659"><a href="#cb96-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-660"><a href="#cb96-660" aria-hidden="true" tabindex="-1"></a><span class="fu">### 变换</span></span>
<span id="cb96-661"><a href="#cb96-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-664"><a href="#cb96-664" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-665"><a href="#cb96-665" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="fu">log10</span>(cty),hwy)) <span class="sc">+</span></span>
<span id="cb96-666"><a href="#cb96-666" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb96-667"><a href="#cb96-667" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_log10</span>()</span>
<span id="cb96-668"><a href="#cb96-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-669"><a href="#cb96-669" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-670"><a href="#cb96-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-671"><a href="#cb96-671" aria-hidden="true" tabindex="-1"></a><span class="fu">### limits</span></span>
<span id="cb96-672"><a href="#cb96-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-675"><a href="#cb96-675" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-676"><a href="#cb96-676" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb96-677"><a href="#cb96-677" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">|</span> </span>
<span id="cb96-678"><a href="#cb96-678" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb96-679"><a href="#cb96-679" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb96-680"><a href="#cb96-680" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlim</span>(<span class="dv">5</span>, <span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb96-681"><a href="#cb96-681" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylim</span>(<span class="dv">10</span>, <span class="dv">25</span>)</span>
<span id="cb96-682"><a href="#cb96-682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-683"><a href="#cb96-683" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(drv, hwy)) <span class="sc">+</span></span>
<span id="cb96-684"><a href="#cb96-684" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb96-685"><a href="#cb96-685" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlim</span>(<span class="st">"f"</span>, <span class="st">"r"</span>) <span class="sc">+</span></span>
<span id="cb96-686"><a href="#cb96-686" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylim</span>(<span class="dv">25</span>, <span class="cn">NA</span>)</span>
<span id="cb96-687"><a href="#cb96-687" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-688"><a href="#cb96-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-691"><a href="#cb96-691" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-692"><a href="#cb96-692" aria-hidden="true" tabindex="-1"></a><span class="co"># filter</span></span>
<span id="cb96-693"><a href="#cb96-693" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">|&gt;</span></span>
<span id="cb96-694"><a href="#cb96-694" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(displ <span class="sc">&gt;=</span> <span class="dv">5</span> <span class="sc">&amp;</span> displ <span class="sc">&lt;=</span> <span class="dv">6</span> <span class="sc">&amp;</span> hwy <span class="sc">&gt;=</span> <span class="dv">10</span> <span class="sc">&amp;</span> hwy <span class="sc">&lt;=</span> <span class="dv">25</span>) <span class="sc">|&gt;</span></span>
<span id="cb96-695"><a href="#cb96-695" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb96-696"><a href="#cb96-696" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb96-697"><a href="#cb96-697" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">na.rm=</span><span class="cn">TRUE</span>)<span class="sc">|</span></span>
<span id="cb96-698"><a href="#cb96-698" aria-hidden="true" tabindex="-1"></a><span class="co"># limits</span></span>
<span id="cb96-699"><a href="#cb96-699" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb96-700"><a href="#cb96-700" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb96-701"><a href="#cb96-701" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb96-702"><a href="#cb96-702" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>)) <span class="sc">+</span>    <span class="co">#取子集</span></span>
<span id="cb96-703"><a href="#cb96-703" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>))  </span>
<span id="cb96-704"><a href="#cb96-704" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-705"><a href="#cb96-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-706"><a href="#cb96-706" aria-hidden="true" tabindex="-1"></a><span class="fu">### zooming</span></span>
<span id="cb96-707"><a href="#cb96-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-708"><a href="#cb96-708" aria-hidden="true" tabindex="-1"></a>调整绘制的数据,在每个刻度中设置<span class="in">`coord_cartesian(xlim= ,ylim= )`</span></span>
<span id="cb96-709"><a href="#cb96-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-712"><a href="#cb96-712" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-713"><a href="#cb96-713" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb96-714"><a href="#cb96-714" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb96-715"><a href="#cb96-715" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">|</span></span>
<span id="cb96-716"><a href="#cb96-716" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb96-717"><a href="#cb96-717" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb96-718"><a href="#cb96-718" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()<span class="sc">+</span></span>
<span id="cb96-719"><a href="#cb96-719" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>))   <span class="co">#放大局部</span></span>
<span id="cb96-720"><a href="#cb96-720" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-721"><a href="#cb96-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-722"><a href="#cb96-722" aria-hidden="true" tabindex="-1"></a><span class="fu">### 共享</span></span>
<span id="cb96-723"><a href="#cb96-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-724"><a href="#cb96-724" aria-hidden="true" tabindex="-1"></a>shared 坐标轴相同</span>
<span id="cb96-725"><a href="#cb96-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-728"><a href="#cb96-728" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-729"><a href="#cb96-729" aria-hidden="true" tabindex="-1"></a>x_scale <span class="ot">&lt;-</span> <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">range</span>(mpg<span class="sc">$</span>displ))</span>
<span id="cb96-730"><a href="#cb96-730" aria-hidden="true" tabindex="-1"></a>y_scale <span class="ot">&lt;-</span> <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">range</span>(mpg<span class="sc">$</span>hwy))</span>
<span id="cb96-731"><a href="#cb96-731" aria-hidden="true" tabindex="-1"></a>col_scale <span class="ot">&lt;-</span> <span class="fu">scale_color_discrete</span>(<span class="at">limits =</span> <span class="fu">unique</span>(mpg<span class="sc">$</span>drv))</span>
<span id="cb96-732"><a href="#cb96-732" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg[mpg<span class="sc">$</span>class<span class="sc">==</span><span class="st">"suv"</span>,], <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb96-733"><a href="#cb96-733" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb96-734"><a href="#cb96-734" aria-hidden="true" tabindex="-1"></a>  x_scale <span class="sc">+</span></span>
<span id="cb96-735"><a href="#cb96-735" aria-hidden="true" tabindex="-1"></a>  y_scale <span class="sc">+</span></span>
<span id="cb96-736"><a href="#cb96-736" aria-hidden="true" tabindex="-1"></a>  col_scale<span class="sc">|</span></span>
<span id="cb96-737"><a href="#cb96-737" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg[mpg<span class="sc">$</span>class<span class="sc">==</span><span class="st">"compact"</span>,], <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb96-738"><a href="#cb96-738" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb96-739"><a href="#cb96-739" aria-hidden="true" tabindex="-1"></a>  x_scale <span class="sc">+</span></span>
<span id="cb96-740"><a href="#cb96-740" aria-hidden="true" tabindex="-1"></a>  y_scale <span class="sc">+</span></span>
<span id="cb96-741"><a href="#cb96-741" aria-hidden="true" tabindex="-1"></a>  col_scale</span>
<span id="cb96-742"><a href="#cb96-742" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-743"><a href="#cb96-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-744"><a href="#cb96-744" aria-hidden="true" tabindex="-1"></a><span class="fu">## 标题 labels</span></span>
<span id="cb96-745"><a href="#cb96-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-748"><a href="#cb96-748" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-749"><a href="#cb96-749" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(cty, hwy)) <span class="sc">+</span></span>
<span id="cb96-750"><a href="#cb96-750" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="dv">1</span> <span class="sc">/</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb96-751"><a href="#cb96-751" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"city driving (mpg)"</span>) <span class="sc">+</span></span>
<span id="cb96-752"><a href="#cb96-752" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"highway driving (mpg)"</span>)<span class="sc">+</span></span>
<span id="cb96-753"><a href="#cb96-753" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">"主标题"</span>)</span>
<span id="cb96-754"><a href="#cb96-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-755"><a href="#cb96-755" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb96-756"><a href="#cb96-756" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> class)) <span class="sc">+</span></span>
<span id="cb96-757"><a href="#cb96-757" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb96-758"><a href="#cb96-758" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb96-759"><a href="#cb96-759" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Engine displacement (L)"</span>,</span>
<span id="cb96-760"><a href="#cb96-760" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Highway fuel economy (mpg)"</span>,</span>
<span id="cb96-761"><a href="#cb96-761" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Car type"</span>, <span class="co"># 图例 美学映射color</span></span>
<span id="cb96-762"><a href="#cb96-762" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Fuel efficiency generally decreases with engine size"</span>,</span>
<span id="cb96-763"><a href="#cb96-763" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Two seaters (sports cars) are an </span></span>
<span id="cb96-764"><a href="#cb96-764" aria-hidden="true" tabindex="-1"></a><span class="st">    exception because of their light weight"</span>,</span>
<span id="cb96-765"><a href="#cb96-765" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data from fueleconomy.gov"</span></span>
<span id="cb96-766"><a href="#cb96-766" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-767"><a href="#cb96-767" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-768"><a href="#cb96-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-769"><a href="#cb96-769" aria-hidden="true" tabindex="-1"></a><span class="fu">## 注释 annotation</span></span>
<span id="cb96-770"><a href="#cb96-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-771"><a href="#cb96-771" aria-hidden="true" tabindex="-1"></a><span class="fu">### 文本 text</span></span>
<span id="cb96-772"><a href="#cb96-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-775"><a href="#cb96-775" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-776"><a href="#cb96-776" aria-hidden="true" tabindex="-1"></a><span class="co"># 字体</span></span>
<span id="cb96-777"><a href="#cb96-777" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">family =</span> <span class="fu">c</span>(<span class="st">"sans"</span>, <span class="st">"serif"</span>, <span class="st">"mono"</span>))</span>
<span id="cb96-778"><a href="#cb96-778" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(x, y)) <span class="sc">+</span> </span>
<span id="cb96-779"><a href="#cb96-779" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> family, <span class="at">family =</span> family))</span>
<span id="cb96-780"><a href="#cb96-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-781"><a href="#cb96-781" aria-hidden="true" tabindex="-1"></a><span class="co"># 样式</span></span>
<span id="cb96-782"><a href="#cb96-782" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">face =</span> <span class="fu">c</span>(<span class="st">"plain"</span>, <span class="st">"bold"</span>, <span class="st">"italic"</span>))</span>
<span id="cb96-783"><a href="#cb96-783" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(x, y)) <span class="sc">+</span> </span>
<span id="cb96-784"><a href="#cb96-784" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> face, <span class="at">fontface =</span> face))</span>
<span id="cb96-785"><a href="#cb96-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-786"><a href="#cb96-786" aria-hidden="true" tabindex="-1"></a><span class="co"># 位置</span></span>
<span id="cb96-787"><a href="#cb96-787" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb96-788"><a href="#cb96-788" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="fl">1.5</span>),</span>
<span id="cb96-789"><a href="#cb96-789" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="fl">1.5</span>),</span>
<span id="cb96-790"><a href="#cb96-790" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="fu">c</span>(</span>
<span id="cb96-791"><a href="#cb96-791" aria-hidden="true" tabindex="-1"></a>    <span class="st">"bottom-left"</span>, <span class="st">"top-left"</span>,  </span>
<span id="cb96-792"><a href="#cb96-792" aria-hidden="true" tabindex="-1"></a>    <span class="st">"bottom-right"</span>, <span class="st">"top-right"</span>, <span class="st">"center"</span></span>
<span id="cb96-793"><a href="#cb96-793" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-794"><a href="#cb96-794" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-795"><a href="#cb96-795" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb96-796"><a href="#cb96-796" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> text))<span class="sc">|</span></span>
<span id="cb96-797"><a href="#cb96-797" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb96-798"><a href="#cb96-798" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> text), <span class="at">vjust =</span> <span class="st">"inward"</span>, <span class="at">hjust =</span> <span class="st">"inward"</span>)</span>
<span id="cb96-799"><a href="#cb96-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-800"><a href="#cb96-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-801"><a href="#cb96-801" aria-hidden="true" tabindex="-1"></a><span class="co"># 自定义</span></span>
<span id="cb96-802"><a href="#cb96-802" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb96-803"><a href="#cb96-803" aria-hidden="true" tabindex="-1"></a>  <span class="at">treatment =</span> <span class="fu">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>), </span>
<span id="cb96-804"><a href="#cb96-804" aria-hidden="true" tabindex="-1"></a>  <span class="at">response =</span> <span class="fu">c</span>(<span class="fl">1.2</span>, <span class="fl">3.4</span>, <span class="fl">2.5</span>)</span>
<span id="cb96-805"><a href="#cb96-805" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-806"><a href="#cb96-806" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(treatment, response)) <span class="sc">+</span> </span>
<span id="cb96-807"><a href="#cb96-807" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb96-808"><a href="#cb96-808" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb96-809"><a href="#cb96-809" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">"("</span>, response, <span class="st">")"</span>)), </span>
<span id="cb96-810"><a href="#cb96-810" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_x =</span> <span class="sc">-</span><span class="fl">0.3</span>,</span>
<span id="cb96-811"><a href="#cb96-811" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_y=</span>.<span class="dv">2</span></span>
<span id="cb96-812"><a href="#cb96-812" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb96-813"><a href="#cb96-813" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-814"><a href="#cb96-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-817"><a href="#cb96-817" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-818"><a href="#cb96-818" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span></span>
<span id="cb96-819"><a href="#cb96-819" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(cyl,am) <span class="sc">|&gt;</span> </span>
<span id="cb96-820"><a href="#cb96-820" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb96-821"><a href="#cb96-821" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">pct =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb96-822"><a href="#cb96-822" aria-hidden="true" tabindex="-1"></a>         <span class="at">lbls =</span> scales<span class="sc">::</span><span class="fu">percent</span>(pct)</span>
<span id="cb96-823"><a href="#cb96-823" aria-hidden="true" tabindex="-1"></a>         )<span class="sc">|&gt;</span> </span>
<span id="cb96-824"><a href="#cb96-824" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">factor</span>(cyl),pct,<span class="at">fill=</span><span class="fu">factor</span>(am)))<span class="sc">+</span></span>
<span id="cb96-825"><a href="#cb96-825" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>,<span class="at">position =</span> <span class="st">"fill"</span>)<span class="sc">+</span></span>
<span id="cb96-826"><a href="#cb96-826" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">label=</span>lbls),</span>
<span id="cb96-827"><a href="#cb96-827" aria-hidden="true" tabindex="-1"></a>              <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb96-828"><a href="#cb96-828" aria-hidden="true" tabindex="-1"></a>              <span class="at">size=</span><span class="dv">3</span></span>
<span id="cb96-829"><a href="#cb96-829" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb96-830"><a href="#cb96-830" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-831"><a href="#cb96-831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-834"><a href="#cb96-834" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-835"><a href="#cb96-835" aria-hidden="true" tabindex="-1"></a>label_info <span class="ot">&lt;-</span> mpg <span class="sc">|&gt;</span></span>
<span id="cb96-836"><a href="#cb96-836" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(drv) <span class="sc">|&gt;</span></span>
<span id="cb96-837"><a href="#cb96-837" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(displ)) <span class="sc">|&gt;</span></span>
<span id="cb96-838"><a href="#cb96-838" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)<span class="sc">|&gt;</span></span>
<span id="cb96-839"><a href="#cb96-839" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb96-840"><a href="#cb96-840" aria-hidden="true" tabindex="-1"></a>        <span class="at">drive_type =</span> <span class="fu">case_when</span>(       <span class="co"># vectorise multiple if_else () statements </span></span>
<span id="cb96-841"><a href="#cb96-841" aria-hidden="true" tabindex="-1"></a>        drv <span class="sc">==</span> <span class="st">"f"</span> <span class="sc">~</span> <span class="st">"front-wheel drive"</span>,</span>
<span id="cb96-842"><a href="#cb96-842" aria-hidden="true" tabindex="-1"></a>        drv <span class="sc">==</span> <span class="st">"r"</span> <span class="sc">~</span> <span class="st">"rear-wheel drive"</span>,</span>
<span id="cb96-843"><a href="#cb96-843" aria-hidden="true" tabindex="-1"></a>        drv <span class="sc">==</span> <span class="st">"4"</span> <span class="sc">~</span> <span class="st">"4-wheel drive"</span>)</span>
<span id="cb96-844"><a href="#cb96-844" aria-hidden="true" tabindex="-1"></a>        )<span class="sc">|&gt;</span></span>
<span id="cb96-845"><a href="#cb96-845" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(displ, hwy, drv, drive_type)</span>
<span id="cb96-846"><a href="#cb96-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-847"><a href="#cb96-847" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb96-848"><a href="#cb96-848" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span></span>
<span id="cb96-849"><a href="#cb96-849" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">"lm"</span>,<span class="at">formula=</span><span class="st">"y~x"</span>,<span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb96-850"><a href="#cb96-850" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb96-851"><a href="#cb96-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-852"><a href="#cb96-852" aria-hidden="true" tabindex="-1"></a>p<span class="sc">+</span>  <span class="fu">geom_text</span>(<span class="co">#添加注释  geom_label 标签加背景框</span></span>
<span id="cb96-853"><a href="#cb96-853" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> label_info, </span>
<span id="cb96-854"><a href="#cb96-854" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">label =</span> drive_type),<span class="co">#label映射</span></span>
<span id="cb96-855"><a href="#cb96-855" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">nudge_y =</span> <span class="dv">2</span></span>
<span id="cb96-856"><a href="#cb96-856" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb96-857"><a href="#cb96-857" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-858"><a href="#cb96-858" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> ggrepel<span class="sc">::</span><span class="fu">geom_label_repel</span>(                   </span>
<span id="cb96-859"><a href="#cb96-859" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> label_info, </span>
<span id="cb96-860"><a href="#cb96-860" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">label =</span> drive_type),</span>
<span id="cb96-861"><a href="#cb96-861" aria-hidden="true" tabindex="-1"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>, <span class="at">size =</span> <span class="dv">5</span>, <span class="at">nudge_y =</span> <span class="dv">2</span></span>
<span id="cb96-862"><a href="#cb96-862" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb96-863"><a href="#cb96-863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-864"><a href="#cb96-864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-865"><a href="#cb96-865" aria-hidden="true" tabindex="-1"></a>potential_outliers <span class="ot">&lt;-</span> mpg <span class="sc">|&gt;</span></span>
<span id="cb96-866"><a href="#cb96-866" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(hwy <span class="sc">&gt;</span> <span class="dv">40</span> <span class="sc">|</span> (hwy <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">&amp;</span> displ <span class="sc">&gt;</span> <span class="dv">5</span>))</span>
<span id="cb96-867"><a href="#cb96-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-868"><a href="#cb96-868" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb96-869"><a href="#cb96-869" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb96-870"><a href="#cb96-870" aria-hidden="true" tabindex="-1"></a>  ggrepel<span class="sc">::</span><span class="fu">geom_text_repel</span>(<span class="at">data =</span> potential_outliers, <span class="fu">aes</span>(<span class="at">label =</span> model)) <span class="sc">+</span></span>
<span id="cb96-871"><a href="#cb96-871" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> potential_outliers, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb96-872"><a href="#cb96-872" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb96-873"><a href="#cb96-873" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> potential_outliers,</span>
<span id="cb96-874"><a href="#cb96-874" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">shape =</span> <span class="st">"circle open"</span></span>
<span id="cb96-875"><a href="#cb96-875" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-876"><a href="#cb96-876" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-877"><a href="#cb96-877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-878"><a href="#cb96-878" aria-hidden="true" tabindex="-1"></a><span class="fu">### markdown</span></span>
<span id="cb96-879"><a href="#cb96-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-882"><a href="#cb96-882" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-883"><a href="#cb96-883" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb96-884"><a href="#cb96-884" aria-hidden="true" tabindex="-1"></a>base <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df, <span class="fu">aes</span>(x, y)) <span class="sc">+</span> </span>
<span id="cb96-885"><a href="#cb96-885" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb96-886"><a href="#cb96-886" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Axis title with *italics* and **boldface**"</span>)</span>
<span id="cb96-887"><a href="#cb96-887" aria-hidden="true" tabindex="-1"></a>base <span class="sc">|</span></span>
<span id="cb96-888"><a href="#cb96-888" aria-hidden="true" tabindex="-1"></a>base <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title.x =</span> ggtext<span class="sc">::</span><span class="fu">element_markdown</span>())  <span class="co">#ggtext::element_markdown</span></span>
<span id="cb96-889"><a href="#cb96-889" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-890"><a href="#cb96-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-891"><a href="#cb96-891" aria-hidden="true" tabindex="-1"></a><span class="fu">### 数学表达式</span></span>
<span id="cb96-892"><a href="#cb96-892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-895"><a href="#cb96-895" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-896"><a href="#cb96-896" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb96-897"><a href="#cb96-897" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb96-898"><a href="#cb96-898" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">cumsum</span>(x<span class="sc">^</span><span class="dv">2</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb96-899"><a href="#cb96-899" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb96-900"><a href="#cb96-900" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb96-901"><a href="#cb96-901" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb96-902"><a href="#cb96-902" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="fu">quote</span>(x[i]),</span>
<span id="cb96-903"><a href="#cb96-903" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="fu">quote</span>(<span class="fu">sum</span>(x[i] <span class="sc">^</span> <span class="dv">2</span>, i <span class="sc">==</span> <span class="dv">1</span>, n)) <span class="co">#数学方程式</span></span>
<span id="cb96-904"><a href="#cb96-904" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-905"><a href="#cb96-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-906"><a href="#cb96-906" aria-hidden="true" tabindex="-1"></a>values <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="sc">-</span><span class="dv">2</span>, <span class="at">to =</span> <span class="dv">2</span>, <span class="at">by =</span> .<span class="dv">01</span>)</span>
<span id="cb96-907"><a href="#cb96-907" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> values, <span class="at">y =</span> values <span class="sc">^</span> <span class="dv">3</span>)</span>
<span id="cb96-908"><a href="#cb96-908" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(x, y)) <span class="sc">+</span> </span>
<span id="cb96-909"><a href="#cb96-909" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_path</span>() <span class="sc">+</span> </span>
<span id="cb96-910"><a href="#cb96-910" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="fu">quote</span>(<span class="fu">f</span>(x) <span class="sc">==</span> x<span class="sc">^</span><span class="dv">3</span>))         <span class="co">#数学表达式   ？plotmath</span></span>
<span id="cb96-911"><a href="#cb96-911" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-912"><a href="#cb96-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-913"><a href="#cb96-913" aria-hidden="true" tabindex="-1"></a><span class="fu">### 线段 直线 箭头</span></span>
<span id="cb96-914"><a href="#cb96-914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-915"><a href="#cb96-915" aria-hidden="true" tabindex="-1"></a>geom_hline()</span>
<span id="cb96-916"><a href="#cb96-916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-917"><a href="#cb96-917" aria-hidden="true" tabindex="-1"></a>geom_vline()</span>
<span id="cb96-918"><a href="#cb96-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-919"><a href="#cb96-919" aria-hidden="true" tabindex="-1"></a>geom_abline</span>
<span id="cb96-920"><a href="#cb96-920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-921"><a href="#cb96-921" aria-hidden="true" tabindex="-1"></a>geom_segment() arrow</span>
<span id="cb96-922"><a href="#cb96-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-925"><a href="#cb96-925" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-926"><a href="#cb96-926" aria-hidden="true" tabindex="-1"></a>trend_text <span class="ot">&lt;-</span> <span class="st">"Larger engine sizes tend to have lower fuel economy."</span> <span class="sc">|&gt;</span></span>
<span id="cb96-927"><a href="#cb96-927" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_wrap</span>(<span class="at">width =</span> <span class="dv">30</span>)</span>
<span id="cb96-928"><a href="#cb96-928" aria-hidden="true" tabindex="-1"></a>trend_text</span>
<span id="cb96-929"><a href="#cb96-929" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb96-930"><a href="#cb96-930" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb96-931"><a href="#cb96-931" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb96-932"><a href="#cb96-932" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"label"</span>, <span class="at">x =</span> <span class="fl">3.5</span>, <span class="at">y =</span> <span class="dv">38</span>,</span>
<span id="cb96-933"><a href="#cb96-933" aria-hidden="true" tabindex="-1"></a>    <span class="at">label =</span> trend_text,</span>
<span id="cb96-934"><a href="#cb96-934" aria-hidden="true" tabindex="-1"></a>    <span class="at">hjust =</span> <span class="st">"left"</span>, <span class="at">color =</span> <span class="st">"red"</span></span>
<span id="cb96-935"><a href="#cb96-935" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb96-936"><a href="#cb96-936" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb96-937"><a href="#cb96-937" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"segment"</span>,</span>
<span id="cb96-938"><a href="#cb96-938" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="dv">3</span>, <span class="at">y =</span> <span class="dv">35</span>, <span class="at">xend =</span> <span class="dv">5</span>, <span class="at">yend =</span> <span class="dv">25</span>, <span class="at">color =</span> <span class="st">"red"</span>,</span>
<span id="cb96-939"><a href="#cb96-939" aria-hidden="true" tabindex="-1"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">type =</span> <span class="st">"closed"</span>)</span>
<span id="cb96-940"><a href="#cb96-940" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-941"><a href="#cb96-941" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-942"><a href="#cb96-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-945"><a href="#cb96-945" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-946"><a href="#cb96-946" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb96-947"><a href="#cb96-947" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb96-948"><a href="#cb96-948" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(mpg, manufacturer <span class="sc">==</span> <span class="st">"subaru"</span>), </span>
<span id="cb96-949"><a href="#cb96-949" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"orange"</span>,</span>
<span id="cb96-950"><a href="#cb96-950" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb96-951"><a href="#cb96-951" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb96-952"><a href="#cb96-952" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() </span>
<span id="cb96-953"><a href="#cb96-953" aria-hidden="true" tabindex="-1"></a>p<span class="sc">|</span>p <span class="sc">+</span> </span>
<span id="cb96-954"><a href="#cb96-954" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">x =</span> <span class="fl">5.5</span>, <span class="at">y =</span> <span class="dv">40</span>, <span class="at">colour =</span> <span class="st">"orange"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb96-955"><a href="#cb96-955" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">x =</span> <span class="fl">5.5</span>, <span class="at">y =</span> <span class="dv">40</span>) <span class="sc">+</span> </span>
<span id="cb96-956"><a href="#cb96-956" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">5.6</span>, <span class="at">y =</span> <span class="dv">40</span>, <span class="at">label =</span> <span class="st">"subaru"</span>, <span class="at">hjust =</span> <span class="st">"left"</span>)<span class="sc">|</span></span>
<span id="cb96-957"><a href="#cb96-957" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> </span>
<span id="cb96-958"><a href="#cb96-958" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(</span>
<span id="cb96-959"><a href="#cb96-959" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"curve"</span>, <span class="at">x =</span> <span class="dv">4</span>, <span class="at">y =</span> <span class="dv">35</span>, <span class="at">xend =</span> <span class="fl">2.65</span>, <span class="at">yend =</span> <span class="dv">27</span>, </span>
<span id="cb96-960"><a href="#cb96-960" aria-hidden="true" tabindex="-1"></a>    <span class="at">curvature =</span> .<span class="dv">3</span>, <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>))</span>
<span id="cb96-961"><a href="#cb96-961" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb96-962"><a href="#cb96-962" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"text"</span>, <span class="at">x =</span> <span class="fl">4.1</span>, <span class="at">y =</span> <span class="dv">35</span>, <span class="at">label =</span> <span class="st">"subaru"</span>, <span class="at">hjust =</span> <span class="st">"left"</span>)</span>
<span id="cb96-963"><a href="#cb96-963" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-964"><a href="#cb96-964" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-965"><a href="#cb96-965" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-966"><a href="#cb96-966" aria-hidden="true" tabindex="-1"></a><span class="fu">## scale</span></span>
<span id="cb96-967"><a href="#cb96-967" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-968"><a href="#cb96-968" aria-hidden="true" tabindex="-1"></a><span class="fu">### x/y_continuous</span></span>
<span id="cb96-969"><a href="#cb96-969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-972"><a href="#cb96-972" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-973"><a href="#cb96-973" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x =</span> wt, <span class="at">y =</span> mpg)) <span class="sc">+</span> </span>
<span id="cb96-974"><a href="#cb96-974" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb96-975"><a href="#cb96-975" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Weight (1000 lbs.)"</span>,   </span>
<span id="cb96-976"><a href="#cb96-976" aria-hidden="true" tabindex="-1"></a>                     <span class="at">n.breaks =</span> <span class="dv">10</span>,                 </span>
<span id="cb96-977"><a href="#cb96-977" aria-hidden="true" tabindex="-1"></a>                     <span class="at">minor_breaks =</span> <span class="cn">NULL</span>,           </span>
<span id="cb96-978"><a href="#cb96-978" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="fl">1.5</span>, <span class="fl">5.5</span>)) <span class="sc">+</span>        </span>
<span id="cb96-979"><a href="#cb96-979" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Miles per gallon"</span>,     </span>
<span id="cb96-980"><a href="#cb96-980" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">35</span>, <span class="dv">5</span>),       </span>
<span id="cb96-981"><a href="#cb96-981" aria-hidden="true" tabindex="-1"></a>                     <span class="at">minor_breaks =</span> <span class="fu">seq</span>(<span class="dv">10</span>, <span class="dv">35</span>, <span class="dv">1</span>), </span>
<span id="cb96-982"><a href="#cb96-982" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">35</span>)) <span class="sc">+</span>          </span>
<span id="cb96-983"><a href="#cb96-983" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Fuel efficiency by car weight"</span>)</span>
<span id="cb96-984"><a href="#cb96-984" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-985"><a href="#cb96-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-986"><a href="#cb96-986" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-987"><a href="#cb96-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-990"><a href="#cb96-990" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-991"><a href="#cb96-991" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(<span class="at">x =</span> price, <span class="at">y =</span> cut)) <span class="sc">+</span></span>
<span id="cb96-992"><a href="#cb96-992" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb96-993"><a href="#cb96-993" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>(<span class="at">scale =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">1000</span>, <span class="at">suffix =</span> <span class="st">"K"</span>))</span>
<span id="cb96-994"><a href="#cb96-994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-995"><a href="#cb96-995" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">fill =</span> clarity)) <span class="sc">+</span></span>
<span id="cb96-996"><a href="#cb96-996" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb96-997"><a href="#cb96-997" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">"Percentage"</span>, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_percent</span>())</span>
<span id="cb96-998"><a href="#cb96-998" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-999"><a href="#cb96-999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1000"><a href="#cb96-1000" aria-hidden="true" tabindex="-1"></a><span class="fu">### x/y_discrete</span></span>
<span id="cb96-1001"><a href="#cb96-1001" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1004"><a href="#cb96-1004" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1005"><a href="#cb96-1005" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">factor</span>(drv),<span class="at">fill=</span>class))<span class="sc">+</span></span>
<span id="cb96-1006"><a href="#cb96-1006" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="ot">-&gt;</span>p</span>
<span id="cb96-1007"><a href="#cb96-1007" aria-hidden="true" tabindex="-1"></a>p <span class="sc">|</span> p <span class="sc">+</span> <span class="fu">scale_x_discrete</span>(<span class="at">name =</span> <span class="st">"drv"</span>,                                  </span>
<span id="cb96-1008"><a href="#cb96-1008" aria-hidden="true" tabindex="-1"></a>                   <span class="at">limits =</span> <span class="fu">c</span>(<span class="st">"f"</span>, <span class="st">"r"</span>),    </span>
<span id="cb96-1009"><a href="#cb96-1009" aria-hidden="true" tabindex="-1"></a>                   <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'f'</span><span class="ot">=</span><span class="st">"drv='f'"</span>,<span class="st">'r'</span><span class="ot">=</span> <span class="st">"drv='r'"</span>),</span>
<span id="cb96-1010"><a href="#cb96-1010" aria-hidden="true" tabindex="-1"></a>                   <span class="at">position =</span> <span class="st">"top"</span>) </span>
<span id="cb96-1011"><a href="#cb96-1011" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1012"><a href="#cb96-1012" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1013"><a href="#cb96-1013" aria-hidden="true" tabindex="-1"></a><span class="fu">### color</span></span>
<span id="cb96-1014"><a href="#cb96-1014" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1017"><a href="#cb96-1017" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1018"><a href="#cb96-1018" aria-hidden="true" tabindex="-1"></a>RColorBrewer<span class="sc">::</span><span class="fu">display.brewer.all</span>()</span>
<span id="cb96-1019"><a href="#cb96-1019" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x=</span>displ, <span class="at">y=</span>hwy, <span class="at">color=</span>drv)) <span class="sc">+</span></span>
<span id="cb96-1020"><a href="#cb96-1020" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape=</span><span class="dv">19</span>, <span class="at">size=</span><span class="dv">3</span>) </span>
<span id="cb96-1021"><a href="#cb96-1021" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> ggthemes<span class="sc">::</span><span class="fu">scale_color_colorblind</span>()</span>
<span id="cb96-1022"><a href="#cb96-1022" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1023"><a href="#cb96-1023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1026"><a href="#cb96-1026" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1027"><a href="#cb96-1027" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x=</span>displ, <span class="at">y=</span>hwy, <span class="at">color=</span>cty)) <span class="sc">+</span></span>
<span id="cb96-1028"><a href="#cb96-1028" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() </span>
<span id="cb96-1029"><a href="#cb96-1029" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"A. Default color gradient"</span>)<span class="sc">|</span></span>
<span id="cb96-1030"><a href="#cb96-1030" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_color_gradient</span>(<span class="at">low=</span><span class="st">"grey"</span>, <span class="at">high=</span><span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb96-1031"><a href="#cb96-1031" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"B. Greyscale gradient"</span>)<span class="sc">|</span></span>
<span id="cb96-1032"><a href="#cb96-1032" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_color_gradient</span>(<span class="at">low=</span><span class="st">"red"</span>, <span class="at">high=</span><span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb96-1033"><a href="#cb96-1033" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"C. Red-blue color gradient"</span>)</span>
<span id="cb96-1034"><a href="#cb96-1034" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1035"><a href="#cb96-1035" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_color_steps</span>(<span class="at">low=</span><span class="st">"red"</span>, <span class="at">high=</span><span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb96-1036"><a href="#cb96-1036" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"D. Red-blue binned color Gradient"</span>)<span class="sc">|</span></span>
<span id="cb96-1037"><a href="#cb96-1037" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_color_steps2</span>(<span class="at">low=</span><span class="st">"red"</span>, <span class="at">mid=</span><span class="st">"white"</span>, <span class="at">high=</span><span class="st">"blue"</span>,</span>
<span id="cb96-1038"><a href="#cb96-1038" aria-hidden="true" tabindex="-1"></a>                       <span class="at">midpoint=</span><span class="fu">median</span>(mtcars<span class="sc">$</span>disp)) <span class="sc">+</span></span>
<span id="cb96-1039"><a href="#cb96-1039" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"E. Red-white-blue binned gradient"</span>)<span class="sc">|</span></span>
<span id="cb96-1040"><a href="#cb96-1040" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_color_viridis_c</span>(<span class="at">direction =</span> <span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span>    <span class="co"># viridis_c,d,b</span></span>
<span id="cb96-1041"><a href="#cb96-1041" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"F. Viridis color gradient"</span>)</span>
<span id="cb96-1042"><a href="#cb96-1042" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1043"><a href="#cb96-1043" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1044"><a href="#cb96-1044" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1047"><a href="#cb96-1047" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1048"><a href="#cb96-1048" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb96-1049"><a href="#cb96-1049" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">rnorm</span>(<span class="dv">10000</span>),</span>
<span id="cb96-1050"><a href="#cb96-1050" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">rnorm</span>(<span class="dv">10000</span>)</span>
<span id="cb96-1051"><a href="#cb96-1051" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-1052"><a href="#cb96-1052" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1053"><a href="#cb96-1053" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb96-1054"><a href="#cb96-1054" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb96-1055"><a href="#cb96-1055" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb96-1056"><a href="#cb96-1056" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Default, continuous"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>)</span>
<span id="cb96-1057"><a href="#cb96-1057" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1058"><a href="#cb96-1058" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb96-1059"><a href="#cb96-1059" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb96-1060"><a href="#cb96-1060" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb96-1061"><a href="#cb96-1061" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb96-1062"><a href="#cb96-1062" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Viridis, continuous"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>)</span>
<span id="cb96-1063"><a href="#cb96-1063" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1064"><a href="#cb96-1064" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb96-1065"><a href="#cb96-1065" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span></span>
<span id="cb96-1066"><a href="#cb96-1066" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb96-1067"><a href="#cb96-1067" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_b</span>() <span class="sc">+</span></span>
<span id="cb96-1068"><a href="#cb96-1068" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Viridis, binned"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>)</span>
<span id="cb96-1069"><a href="#cb96-1069" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1070"><a href="#cb96-1070" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1071"><a href="#cb96-1071" aria-hidden="true" tabindex="-1"></a><span class="fu">### fill</span></span>
<span id="cb96-1072"><a href="#cb96-1072" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1075"><a href="#cb96-1075" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1076"><a href="#cb96-1076" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg,<span class="fu">aes</span>(drv,<span class="at">fill=</span>class))<span class="sc">+</span></span>
<span id="cb96-1077"><a href="#cb96-1077" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>()</span>
<span id="cb96-1078"><a href="#cb96-1078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1079"><a href="#cb96-1079" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"A. Default colors"</span>)<span class="sc">|</span></span>
<span id="cb96-1080"><a href="#cb96-1080" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette=</span><span class="st">"Set2"</span>) <span class="sc">+</span></span>
<span id="cb96-1081"><a href="#cb96-1081" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"B. ColorBrewer Set2 palette"</span>)</span>
<span id="cb96-1082"><a href="#cb96-1082" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1083"><a href="#cb96-1083" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb96-1084"><a href="#cb96-1084" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"C. Viridis color scheme"</span>)<span class="sc">|</span></span>
<span id="cb96-1085"><a href="#cb96-1085" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">scale_fill_manual</span>(<span class="at">values=</span><span class="fu">c</span>(<span class="st">"gold4"</span>, <span class="st">"orange2"</span>, <span class="st">"deepskyblue3"</span>, <span class="st">"blue4"</span>,</span>
<span id="cb96-1086"><a href="#cb96-1086" aria-hidden="true" tabindex="-1"></a>                               <span class="st">"brown2"</span>, <span class="st">"yellowgreen"</span>,<span class="st">"lightpink"</span>)) <span class="sc">+</span></span>
<span id="cb96-1087"><a href="#cb96-1087" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"D. Manual color selection"</span>)</span>
<span id="cb96-1088"><a href="#cb96-1088" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1089"><a href="#cb96-1089" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1090"><a href="#cb96-1090" aria-hidden="true" tabindex="-1"></a><span class="fu">## 分面</span></span>
<span id="cb96-1091"><a href="#cb96-1091" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1094"><a href="#cb96-1094" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1095"><a href="#cb96-1095" aria-hidden="true" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg,<span class="fu">aes</span>(<span class="at">x=</span>displ))<span class="sc">+</span></span>
<span id="cb96-1096"><a href="#cb96-1096" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill=</span><span class="st">"lightblue"</span>)</span>
<span id="cb96-1097"><a href="#cb96-1097" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1098"><a href="#cb96-1098" aria-hidden="true" tabindex="-1"></a><span class="co"># 一个分类变量</span></span>
<span id="cb96-1099"><a href="#cb96-1099" aria-hidden="true" tabindex="-1"></a>q <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>drv,<span class="at">nrow =</span> <span class="dv">3</span>)</span>
<span id="cb96-1100"><a href="#cb96-1100" aria-hidden="true" tabindex="-1"></a>q <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>drv,<span class="at">ncol =</span> <span class="dv">3</span>)  <span class="co">#</span></span>
<span id="cb96-1101"><a href="#cb96-1101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1102"><a href="#cb96-1102" aria-hidden="true" tabindex="-1"></a><span class="co"># 多个分类变量</span></span>
<span id="cb96-1103"><a href="#cb96-1103" aria-hidden="true" tabindex="-1"></a>q <span class="sc">+</span> <span class="fu">facet_grid</span>(drv<span class="sc">~</span>class)</span>
<span id="cb96-1104"><a href="#cb96-1104" aria-hidden="true" tabindex="-1"></a>q <span class="sc">+</span> <span class="fu">facet_grid</span>(drv<span class="sc">~</span>.)</span>
<span id="cb96-1105"><a href="#cb96-1105" aria-hidden="true" tabindex="-1"></a>q <span class="sc">+</span> <span class="fu">facet_grid</span>(.<span class="sc">~</span>drv)   <span class="co">#</span></span>
<span id="cb96-1106"><a href="#cb96-1106" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1107"><a href="#cb96-1107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1110"><a href="#cb96-1110" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1111"><a href="#cb96-1111" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb96-1112"><a href="#cb96-1112" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb96-1113"><a href="#cb96-1113" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(drv <span class="sc">~</span> cyl) <span class="sc">|</span></span>
<span id="cb96-1114"><a href="#cb96-1114" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb96-1115"><a href="#cb96-1115" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb96-1116"><a href="#cb96-1116" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(drv <span class="sc">~</span> cyl, <span class="at">scales =</span> <span class="st">"free_y"</span>)</span>
<span id="cb96-1117"><a href="#cb96-1117" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1118"><a href="#cb96-1118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1119"><a href="#cb96-1119" aria-hidden="true" tabindex="-1"></a><span class="fu">## 主题</span></span>
<span id="cb96-1120"><a href="#cb96-1120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1121"><a href="#cb96-1121" aria-hidden="true" tabindex="-1"></a><span class="fu">### 内置主题</span></span>
<span id="cb96-1122"><a href="#cb96-1122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1125"><a href="#cb96-1125" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1126"><a href="#cb96-1126" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg,<span class="fu">aes</span>(displ,hwy))</span>
<span id="cb96-1127"><a href="#cb96-1127" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme_grey</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"theme_grey"</span>)  <span class="sc">|</span></span>
<span id="cb96-1128"><a href="#cb96-1128" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"theme_bw"</span>)  </span>
<span id="cb96-1129"><a href="#cb96-1129" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"theme_minimal"</span>)<span class="sc">|</span>  </span>
<span id="cb96-1130"><a href="#cb96-1130" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> <span class="fu">theme_classic</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"theme_classic"</span>)</span>
<span id="cb96-1131"><a href="#cb96-1131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1132"><a href="#cb96-1132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1133"><a href="#cb96-1133" aria-hidden="true" tabindex="-1"></a><span class="fu">### 字体</span></span>
<span id="cb96-1134"><a href="#cb96-1134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1137"><a href="#cb96-1137" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1138"><a href="#cb96-1138" aria-hidden="true" tabindex="-1"></a>findfont <span class="ot">&lt;-</span> <span class="cf">function</span>(x){</span>
<span id="cb96-1139"><a href="#cb96-1139" aria-hidden="true" tabindex="-1"></a>  <span class="fu">suppressMessages</span>(<span class="fu">require</span>(showtext))</span>
<span id="cb96-1140"><a href="#cb96-1140" aria-hidden="true" tabindex="-1"></a>  <span class="fu">suppressMessages</span>(<span class="fu">require</span>(dplyr))</span>
<span id="cb96-1141"><a href="#cb96-1141" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="fu">font_files</span>(), <span class="fu">grepl</span>(x, family, <span class="at">ignore.case=</span><span class="cn">TRUE</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb96-1142"><a href="#cb96-1142" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">select</span>(path, file, family, face)</span>
<span id="cb96-1143"><a href="#cb96-1143" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb96-1144"><a href="#cb96-1144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1145"><a href="#cb96-1145" aria-hidden="true" tabindex="-1"></a><span class="fu">findfont</span>(<span class="st">"comic"</span>)</span>
<span id="cb96-1146"><a href="#cb96-1146" aria-hidden="true" tabindex="-1"></a><span class="fu">font_add</span>(<span class="at">family =</span> <span class="st">"Times New Roman"</span>, <span class="at">regular =</span> <span class="st">"C:</span><span class="sc">\\</span><span class="st">Windows</span><span class="sc">\\</span><span class="st">Fonts</span><span class="sc">\\</span><span class="st">Times New Roman</span><span class="sc">\\</span><span class="st">times.ttf"</span>,</span>
<span id="cb96-1147"><a href="#cb96-1147" aria-hidden="true" tabindex="-1"></a>         <span class="at">bold =</span> <span class="st">"C:</span><span class="sc">\\</span><span class="st">Windows</span><span class="sc">\\</span><span class="st">Fonts</span><span class="sc">\\</span><span class="st">Times New Roman</span><span class="sc">\\</span><span class="st">timesbd.ttf"</span>,</span>
<span id="cb96-1148"><a href="#cb96-1148" aria-hidden="true" tabindex="-1"></a>         <span class="at">italic =</span> <span class="st">"C:</span><span class="sc">\\</span><span class="st">Windows</span><span class="sc">\\</span><span class="st">Fonts</span><span class="sc">\\</span><span class="st">Times New Roman</span><span class="sc">\\</span><span class="st">timesi.ttf"</span>,</span>
<span id="cb96-1149"><a href="#cb96-1149" aria-hidden="true" tabindex="-1"></a>         <span class="at">bolditalic =</span> <span class="st">"C:</span><span class="sc">\\</span><span class="st">Windows</span><span class="sc">\\</span><span class="st">Fonts</span><span class="sc">\\</span><span class="st">Times New Roman</span><span class="sc">\\</span><span class="st">timesbi.ttf"</span>)</span>
<span id="cb96-1150"><a href="#cb96-1150" aria-hidden="true" tabindex="-1"></a><span class="fu">findfont</span>(<span class="st">"Times New Roman"</span>)</span>
<span id="cb96-1151"><a href="#cb96-1151" aria-hidden="true" tabindex="-1"></a><span class="fu">font_families</span>()</span>
<span id="cb96-1152"><a href="#cb96-1152" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1153"><a href="#cb96-1153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1154"><a href="#cb96-1154" aria-hidden="true" tabindex="-1"></a><span class="fu">### 自定义主题</span></span>
<span id="cb96-1155"><a href="#cb96-1155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1158"><a href="#cb96-1158" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1159"><a href="#cb96-1159" aria-hidden="true" tabindex="-1"></a>mytheme <span class="ot">&lt;-</span> <span class="fu">theme</span>(<span class="at">plot.title=</span><span class="fu">element_text</span>(<span class="at">face=</span><span class="st">"bold.italic"</span>,  <span class="at">size=</span><span class="st">"14"</span>, <span class="at">color=</span><span class="st">"brown"</span>),</span>
<span id="cb96-1160"><a href="#cb96-1160" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">face=</span><span class="st">"bold.italic"</span>,  <span class="at">size=</span><span class="dv">10</span>, <span class="at">color=</span><span class="st">"brown"</span>),</span>
<span id="cb96-1161"><a href="#cb96-1161" aria-hidden="true" tabindex="-1"></a>                 <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">face=</span><span class="st">"bold"</span>, <span class="at">size=</span><span class="dv">9</span>,  <span class="at">color=</span><span class="st">"darkblue"</span>), </span>
<span id="cb96-1162"><a href="#cb96-1162" aria-hidden="true" tabindex="-1"></a>                 <span class="at">panel.background=</span><span class="fu">element_rect</span>(<span class="at">fill=</span><span class="st">"white"</span>,  <span class="at">color=</span><span class="st">"darkblue"</span>),  </span>
<span id="cb96-1163"><a href="#cb96-1163" aria-hidden="true" tabindex="-1"></a>                 <span class="at">panel.grid.major.y=</span><span class="fu">element_line</span>(<span class="at">color=</span><span class="st">"grey"</span>,  <span class="at">linetype=</span><span class="dv">1</span>),  </span>
<span id="cb96-1164"><a href="#cb96-1164" aria-hidden="true" tabindex="-1"></a>                 <span class="at">panel.grid.minor.y=</span><span class="fu">element_line</span>(<span class="at">color=</span><span class="st">"grey"</span>,  <span class="at">linetype=</span><span class="dv">2</span>),  </span>
<span id="cb96-1165"><a href="#cb96-1165" aria-hidden="true" tabindex="-1"></a>                 <span class="at">panel.grid.minor.x=</span><span class="fu">element_blank</span>(),  <span class="at">legend.position=</span><span class="st">"top"</span>) </span>
<span id="cb96-1166"><a href="#cb96-1166" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x=</span>drv, <span class="at">y=</span>hwy, <span class="at">fill=</span>drv)) <span class="sc">+</span>  </span>
<span id="cb96-1167"><a href="#cb96-1167" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span>  </span>
<span id="cb96-1168"><a href="#cb96-1168" aria-hidden="true" tabindex="-1"></a>  mytheme </span>
<span id="cb96-1169"><a href="#cb96-1169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1170"><a href="#cb96-1170" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1171"><a href="#cb96-1171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1172"><a href="#cb96-1172" aria-hidden="true" tabindex="-1"></a><span class="fu">### 图例</span></span>
<span id="cb96-1173"><a href="#cb96-1173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1176"><a href="#cb96-1176" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1177"><a href="#cb96-1177" aria-hidden="true" tabindex="-1"></a><span class="co"># 位置和布局</span></span>
<span id="cb96-1178"><a href="#cb96-1178" aria-hidden="true" tabindex="-1"></a>base <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb96-1179"><a href="#cb96-1179" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> class))</span>
<span id="cb96-1180"><a href="#cb96-1180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1181"><a href="#cb96-1181" aria-hidden="true" tabindex="-1"></a>base <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>) <span class="co"># the default</span></span>
<span id="cb96-1182"><a href="#cb96-1182" aria-hidden="true" tabindex="-1"></a>base <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"left"</span>)</span>
<span id="cb96-1183"><a href="#cb96-1183" aria-hidden="true" tabindex="-1"></a>base <span class="sc">+</span> </span>
<span id="cb96-1184"><a href="#cb96-1184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) <span class="sc">+</span></span>
<span id="cb96-1185"><a href="#cb96-1185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">3</span>))</span>
<span id="cb96-1186"><a href="#cb96-1186" aria-hidden="true" tabindex="-1"></a>base <span class="sc">+</span> </span>
<span id="cb96-1187"><a href="#cb96-1187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb96-1188"><a href="#cb96-1188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">override.aes =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">4</span>)))</span>
<span id="cb96-1189"><a href="#cb96-1189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1190"><a href="#cb96-1190" aria-hidden="true" tabindex="-1"></a><span class="co"># 文本</span></span>
<span id="cb96-1191"><a href="#cb96-1191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1192"><a href="#cb96-1192" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg, <span class="at">color =</span> <span class="fu">factor</span>(cyl))) <span class="sc">+</span></span>
<span id="cb96-1193"><a href="#cb96-1193" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size=</span><span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb96-1194"><a href="#cb96-1194" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">name=</span><span class="st">"Cylinders"</span>) <span class="sc">+</span></span>
<span id="cb96-1195"><a href="#cb96-1195" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Fuel Efficiency for 32 Automobiles"</span>,</span>
<span id="cb96-1196"><a href="#cb96-1196" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Weight (1000 lbs)"</span>,</span>
<span id="cb96-1197"><a href="#cb96-1197" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Miles per gallon"</span>) <span class="sc">+</span></span>
<span id="cb96-1198"><a href="#cb96-1198" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">95</span>, .<span class="dv">95</span>),</span>
<span id="cb96-1199"><a href="#cb96-1199" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.justification =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb96-1200"><a href="#cb96-1200" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"lightgrey"</span>,</span>
<span id="cb96-1201"><a href="#cb96-1201" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb96-1202"><a href="#cb96-1202" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">linewidth =</span> <span class="dv">1</span>),</span>
<span id="cb96-1203"><a href="#cb96-1203" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb96-1204"><a href="#cb96-1204" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>)</span>
<span id="cb96-1205"><a href="#cb96-1205" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1206"><a href="#cb96-1206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1209"><a href="#cb96-1209" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1210"><a href="#cb96-1210" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb96-1211"><a href="#cb96-1211" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb96-1212"><a href="#cb96-1212" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb96-1213"><a href="#cb96-1213" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Larger engine sizes tend to have lower fuel economy"</span>,</span>
<span id="cb96-1214"><a href="#cb96-1214" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Source: https://fueleconomy.gov."</span></span>
<span id="cb96-1215"><a href="#cb96-1215" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb96-1216"><a href="#cb96-1216" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb96-1217"><a href="#cb96-1217" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.8</span>, <span class="fl">0.9</span>),</span>
<span id="cb96-1218"><a href="#cb96-1218" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb96-1219"><a href="#cb96-1219" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.box.background =</span> <span class="fu">element_rect</span>(<span class="at">color =</span> <span class="st">"blue"</span>),</span>
<span id="cb96-1220"><a href="#cb96-1220" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>,<span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb96-1221"><a href="#cb96-1221" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb96-1222"><a href="#cb96-1222" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb96-1223"><a href="#cb96-1223" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb96-1224"><a href="#cb96-1224" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb96-1225"><a href="#cb96-1225" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1226"><a href="#cb96-1226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1227"><a href="#cb96-1227" aria-hidden="true" tabindex="-1"></a><span class="fu">### 绘图区</span></span>
<span id="cb96-1228"><a href="#cb96-1228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1231"><a href="#cb96-1231" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1232"><a href="#cb96-1232" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>am <span class="ot">&lt;-</span> <span class="fu">factor</span>(mtcars<span class="sc">$</span>am, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Automatic"</span>, <span class="st">"Manual"</span>)) </span>
<span id="cb96-1233"><a href="#cb96-1233" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>mtcars, <span class="fu">aes</span>(<span class="at">x =</span> disp, <span class="at">y =</span> mpg)) <span class="sc">+</span>                     </span>
<span id="cb96-1234"><a href="#cb96-1234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color=</span><span class="fu">factor</span>(cyl)), <span class="at">size=</span><span class="dv">2</span>) <span class="sc">+</span>                   </span>
<span id="cb96-1235"><a href="#cb96-1235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">"lm"</span>, <span class="at">formula =</span> y <span class="sc">~</span> x <span class="sc">+</span> <span class="fu">I</span>(x<span class="sc">^</span><span class="dv">2</span>),                             </span>
<span id="cb96-1236"><a href="#cb96-1236" aria-hidden="true" tabindex="-1"></a>              <span class="at">linetype=</span><span class="st">"dotted"</span>, <span class="at">se=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb96-1237"><a href="#cb96-1237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="st">"Number of cylinders"</span>) <span class="sc">+</span></span>
<span id="cb96-1238"><a href="#cb96-1238" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>am, <span class="at">ncol=</span><span class="dv">2</span>) <span class="sc">+</span>                                      </span>
<span id="cb96-1239"><a href="#cb96-1239" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mileage, transmission type, and number of cylinders"</span>,</span>
<span id="cb96-1240"><a href="#cb96-1240" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Engine displacement (cu. in.)"</span>,</span>
<span id="cb96-1241"><a href="#cb96-1241" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Miles per gallon"</span>) <span class="sc">+</span></span>
<span id="cb96-1242"><a href="#cb96-1242" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span>                                                  </span>
<span id="cb96-1243"><a href="#cb96-1243" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"white"</span>),</span>
<span id="cb96-1244"><a href="#cb96-1244" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_line</span>(<span class="at">color=</span><span class="st">"lightgrey"</span>),</span>
<span id="cb96-1245"><a href="#cb96-1245" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.minor =</span> <span class="fu">element_line</span>(<span class="at">color=</span><span class="st">"lightgrey"</span>,</span>
<span id="cb96-1246"><a href="#cb96-1246" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">linetype=</span><span class="st">"dashed"</span>),</span>
<span id="cb96-1247"><a href="#cb96-1247" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb96-1248"><a href="#cb96-1248" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb96-1249"><a href="#cb96-1249" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.key =</span> <span class="fu">element_blank</span>())</span>
<span id="cb96-1250"><a href="#cb96-1250" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb96-1251"><a href="#cb96-1251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1254"><a href="#cb96-1254" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb96-1255"><a href="#cb96-1255" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(grid)</span>
<span id="cb96-1256"><a href="#cb96-1256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1257"><a href="#cb96-1257" aria-hidden="true" tabindex="-1"></a>gray_gradient <span class="ot">&lt;-</span> <span class="fu">linearGradient</span>(scales<span class="sc">::</span><span class="fu">pal_grey</span>()(<span class="dv">10</span>))</span>
<span id="cb96-1258"><a href="#cb96-1258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-1259"><a href="#cb96-1259" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb96-1260"><a href="#cb96-1260" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb96-1261"><a href="#cb96-1261" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> gray_gradient))</span>
<span id="cb96-1262"><a href="#cb96-1262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>